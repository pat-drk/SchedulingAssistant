import{u as gi,a as mi,g as yi,j as vi,_ as _i,m as bi,r as N,b as wi,c as Si,d as ur,e as xi,f as Ei,h as Ri,i as Oi,k as Vn,l as Kn,R as Jn,n as d,C as Ir,t as h,o as Pi,N as Ci,T as Mi,B as jt,D as Hn,O as Vt,p as Ln,P as Di,q as Kt,s as ke,I as Ti,v as zi,w as Ni,M as ki,x as ji,y as Hi,z as un,A as Jt,E as Li,F as Qt,G as Zt,H as en,J as tn,K as nn,S as $i,L as Wi,Q as Ai,U as Bi,V as Ii,W as Fr,X as Fi,Y as qi,Z as qr,$ as $n,a0 as Gi,a1 as Wn}from"./index-CWU0J6Yg.js";import{g as Yi}from"./AutoFillSettings-CAfQNIvE.js";const Ui=(t,e)=>{const{titleId:n}=gi();return{components:{root:"span"},root:mi(yi("span",{ref:e,id:n,...t}),{elementType:"span"})}},Xi=t=>vi(t.root,{}),Vi={root:"fui-MessageBarTitle"},Ki=_i("r168xkm9",null,[".r168xkm9{font-family:var(--fontFamilyBase);font-size:var(--fontSizeBase300);font-weight:var(--fontWeightSemibold);line-height:var(--lineHeightBase300);}",'.r168xkm9::after{content:" ";}']),Ji=t=>{"use no memo";const e=Ki();return t.root.className=bi(Vi.root,e,t.root.className),t},fo=N.forwardRef((t,e)=>{const n=Ui(t,e);return Ji(n),wi("useMessageBarTitleStyles_unstable")(n),Xi(n)});fo.displayName="MessageBarTitle";var po={exports:{}},It={},Qn={exports:{}};(function(t,e){(function(n,r){r(e)})(Si,function(n){function r(E){return function(ae,ee,te,pe,_e,Ne,de){return E(ae,ee,de)}}function o(E){return function(ae,ee,te,pe){if(!ae||!ee||typeof ae!="object"||typeof ee!="object")return E(ae,ee,te,pe);var _e=pe.get(ae),Ne=pe.get(ee);if(_e&&Ne)return _e===ee&&Ne===ae;pe.set(ae,ee),pe.set(ee,ae);var de=E(ae,ee,te,pe);return pe.delete(ae),pe.delete(ee),de}}function i(E,B){var ae={};for(var ee in E)ae[ee]=E[ee];for(var ee in B)ae[ee]=B[ee];return ae}function s(E){return E.constructor===Object||E.constructor==null}function c(E){return typeof E.then=="function"}function l(E,B){return E===B||E!==E&&B!==B}var a="[object Arguments]",f="[object Boolean]",m="[object Date]",y="[object RegExp]",g="[object Map]",q="[object Number]",G="[object Object]",A="[object Set]",b="[object String]",w=Object.prototype.toString;function C(E){var B=E.areArraysEqual,ae=E.areDatesEqual,ee=E.areMapsEqual,te=E.areObjectsEqual,pe=E.areRegExpsEqual,_e=E.areSetsEqual,Ne=E.createIsNestedEqual,de=Ne(Ge);function Ge(ce,fe,Ie){if(ce===fe)return!0;if(!ce||!fe||typeof ce!="object"||typeof fe!="object")return ce!==ce&&fe!==fe;if(s(ce)&&s(fe))return te(ce,fe,de,Ie);var Ut=Array.isArray(ce),ft=Array.isArray(fe);if(Ut||ft)return Ut===ft&&B(ce,fe,de,Ie);var Ye=w.call(ce);return Ye!==w.call(fe)?!1:Ye===m?ae(ce,fe,de,Ie):Ye===y?pe(ce,fe,de,Ie):Ye===g?ee(ce,fe,de,Ie):Ye===A?_e(ce,fe,de,Ie):Ye===G||Ye===a?c(ce)||c(fe)?!1:te(ce,fe,de,Ie):Ye===f||Ye===q||Ye===b?l(ce.valueOf(),fe.valueOf()):!1}return Ge}function k(E,B,ae,ee){var te=E.length;if(B.length!==te)return!1;for(;te-- >0;)if(!ae(E[te],B[te],te,te,E,B,ee))return!1;return!0}var x=o(k);function $(E,B){return l(E.valueOf(),B.valueOf())}function he(E,B,ae,ee){var te=E.size===B.size;if(!te)return!1;if(!E.size)return!0;var pe={},_e=0;return E.forEach(function(Ne,de){if(te){var Ge=!1,ce=0;B.forEach(function(fe,Ie){!Ge&&!pe[ce]&&(Ge=ae(de,Ie,_e,ce,E,B,ee)&&ae(Ne,fe,de,Ie,E,B,ee))&&(pe[ce]=!0),ce++}),_e++,te=Ge}}),te}var ye=o(he),ze="_owner",He=Object.prototype.hasOwnProperty;function rt(E,B,ae,ee){var te=Object.keys(E),pe=te.length;if(Object.keys(B).length!==pe)return!1;for(var _e;pe-- >0;){if(_e=te[pe],_e===ze){var Ne=!!E.$$typeof,de=!!B.$$typeof;if((Ne||de)&&Ne!==de)return!1}if(!He.call(B,_e)||!ae(E[_e],B[_e],_e,_e,E,B,ee))return!1}return!0}var ut=o(rt);function ot(E,B){return E.source===B.source&&E.flags===B.flags}function dt(E,B,ae,ee){var te=E.size===B.size;if(!te)return!1;if(!E.size)return!0;var pe={};return E.forEach(function(_e,Ne){if(te){var de=!1,Ge=0;B.forEach(function(ce,fe){!de&&!pe[Ge]&&(de=ae(_e,ce,Ne,fe,E,B,ee))&&(pe[Ge]=!0),Ge++}),te=de}}),te}var xt=o(dt),it=Object.freeze({areArraysEqual:k,areDatesEqual:$,areMapsEqual:he,areObjectsEqual:rt,areRegExpsEqual:ot,areSetsEqual:dt,createIsNestedEqual:r}),Ze=Object.freeze({areArraysEqual:x,areDatesEqual:$,areMapsEqual:ye,areObjectsEqual:ut,areRegExpsEqual:ot,areSetsEqual:xt,createIsNestedEqual:r}),Et=C(it);function le(E,B){return Et(E,B,void 0)}var Ee=C(i(it,{createIsNestedEqual:function(){return l}}));function v(E,B){return Ee(E,B,void 0)}var Mn=C(Ze);function Gt(E,B){return Mn(E,B,new WeakMap)}var Dn=C(i(Ze,{createIsNestedEqual:function(){return l}}));function Yt(E,B){return Dn(E,B,new WeakMap)}function Be(E){return C(i(it,E(it)))}function Nt(E){var B=C(i(Ze,E(Ze)));return function(ae,ee,te){return te===void 0&&(te=new WeakMap),B(ae,ee,te)}}n.circularDeepEqual=Gt,n.circularShallowEqual=Yt,n.createCustomCircularEqual=Nt,n.createCustomEqual=Be,n.deepEqual=le,n.sameValueZeroEqual=l,n.shallowEqual=v,Object.defineProperty(n,"__esModule",{value:!0})})})(Qn,Qn.exports);var dr=Qn.exports,Zn={exports:{}};function ho(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(n=ho(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Gr(){for(var t,e,n=0,r="",o=arguments.length;n<o;n++)(t=arguments[n])&&(e=ho(t))&&(r&&(r+=" "),r+=e);return r}Zn.exports=Gr,Zn.exports.clsx=Gr;var gn=Zn.exports,J={},Qi=function(e,n,r){return e===n?!0:e.className===n.className&&r(e.style,n.style)&&e.width===n.width&&e.autoSize===n.autoSize&&e.cols===n.cols&&e.draggableCancel===n.draggableCancel&&e.draggableHandle===n.draggableHandle&&r(e.verticalCompact,n.verticalCompact)&&r(e.compactType,n.compactType)&&r(e.layout,n.layout)&&r(e.margin,n.margin)&&r(e.containerPadding,n.containerPadding)&&e.rowHeight===n.rowHeight&&e.maxRows===n.maxRows&&e.isBounded===n.isBounded&&e.isDraggable===n.isDraggable&&e.isResizable===n.isResizable&&e.allowOverlap===n.allowOverlap&&e.preventCollision===n.preventCollision&&e.useCSSTransforms===n.useCSSTransforms&&e.transformScale===n.transformScale&&e.isDroppable===n.isDroppable&&r(e.resizeHandles,n.resizeHandles)&&r(e.resizeHandle,n.resizeHandle)&&e.onLayoutChange===n.onLayoutChange&&e.onDragStart===n.onDragStart&&e.onDrag===n.onDrag&&e.onDragStop===n.onDragStop&&e.onResizeStart===n.onResizeStart&&e.onResize===n.onResize&&e.onResizeStop===n.onResizeStop&&e.onDrop===n.onDrop&&r(e.droppingItem,n.droppingItem)&&r(e.innerRef,n.innerRef)};Object.defineProperty(J,"__esModule",{value:!0});J.bottom=mn;J.childrenEqual=os;J.cloneLayout=go;J.cloneLayoutItem=bt;J.collides=yn;J.compact=yo;J.compactItem=vo;J.compactType=vs;J.correctBounds=_o;J.fastPositionEqual=is;J.fastRGLPropsEqual=void 0;J.getAllCollisions=bo;J.getFirstCollision=vt;J.getLayoutItem=fr;J.getStatics=pr;J.modifyLayout=mo;J.moveElement=At;J.moveElementAwayFromCollision=tr;J.noop=void 0;J.perc=as;J.resizeItemInDirection=ps;J.setTopLeft=gs;J.setTransform=hs;J.sortLayoutItems=_r;J.sortLayoutItemsByColRow=Ro;J.sortLayoutItemsByRowCol=Eo;J.synchronizeLayoutWithChildren=ms;J.validateLayout=ys;J.withLayoutItem=rs;var Yr=dr,Wt=Zi(N);function Zi(t){return t&&t.__esModule?t:{default:t}}function Ur(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function dn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ur(Object(n),!0).forEach(function(r){es(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ur(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function es(t,e,n){return(e=ts(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ts(t){var e=ns(t,"string");return typeof e=="symbol"?e:e+""}function ns(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mn(t){let e=0,n;for(let r=0,o=t.length;r<o;r++)n=t[r].y+t[r].h,n>e&&(e=n);return e}function go(t){const e=Array(t.length);for(let n=0,r=t.length;n<r;n++)e[n]=bt(t[n]);return e}function mo(t,e){const n=Array(t.length);for(let r=0,o=t.length;r<o;r++)e.i===t[r].i?n[r]=e:n[r]=t[r];return n}function rs(t,e,n){let r=fr(t,e);return r?(r=n(bt(r)),t=mo(t,r),[t,r]):[t,null]}function bt(t){return{w:t.w,h:t.h,x:t.x,y:t.y,i:t.i,minW:t.minW,maxW:t.maxW,minH:t.minH,maxH:t.maxH,moved:!!t.moved,static:!!t.static,isDraggable:t.isDraggable,isResizable:t.isResizable,resizeHandles:t.resizeHandles,isBounded:t.isBounded}}function os(t,e){return(0,Yr.deepEqual)(Wt.default.Children.map(t,n=>n?.key),Wt.default.Children.map(e,n=>n?.key))&&(0,Yr.deepEqual)(Wt.default.Children.map(t,n=>n?.props["data-grid"]),Wt.default.Children.map(e,n=>n?.props["data-grid"]))}J.fastRGLPropsEqual=Qi;function is(t,e){return t.left===e.left&&t.top===e.top&&t.width===e.width&&t.height===e.height}function yn(t,e){return!(t.i===e.i||t.x+t.w<=e.x||t.x>=e.x+e.w||t.y+t.h<=e.y||t.y>=e.y+e.h)}function yo(t,e,n,r){const o=pr(t);let i=mn(o);const s=_r(t,e),c=Array(t.length);for(let l=0,a=s.length;l<a;l++){let f=bt(s[l]);f.static||(f=vo(o,f,e,n,s,r,i),i=Math.max(i,f.y+f.h),o.push(f)),c[t.indexOf(s[l])]=f,f.moved=!1}return c}const ss={x:"w",y:"h"};function er(t,e,n,r){const o=ss[r];e[r]+=1;const i=t.map(s=>s.i).indexOf(e.i);for(let s=i+1;s<t.length;s++){const c=t[s];if(!c.static){if(c.y>e.y+e.h)break;yn(e,c)&&er(t,c,n+e[o],r)}}e[r]=n}function vo(t,e,n,r,o,i,s){const c=n==="vertical",l=n==="horizontal";if(c)for(typeof s=="number"?e.y=Math.min(s,e.y):e.y=Math.min(mn(t),e.y);e.y>0&&!vt(t,e);)e.y--;else if(l)for(;e.x>0&&!vt(t,e);)e.x--;let a;for(;(a=vt(t,e))&&!(n===null&&i);)if(l?er(o,e,a.x+a.w,"x"):er(o,e,a.y+a.h,"y"),l&&e.x+e.w>r)for(e.x=r-e.w,e.y++;e.x>0&&!vt(t,e);)e.x--;return e.y=Math.max(e.y,0),e.x=Math.max(e.x,0),e}function _o(t,e){const n=pr(t);for(let r=0,o=t.length;r<o;r++){const i=t[r];if(i.x+i.w>e.cols&&(i.x=e.cols-i.w),i.x<0&&(i.x=0,i.w=e.cols),!i.static)n.push(i);else for(;vt(n,i);)i.y++}return t}function fr(t,e){for(let n=0,r=t.length;n<r;n++)if(t[n].i===e)return t[n]}function vt(t,e){for(let n=0,r=t.length;n<r;n++)if(yn(t[n],e))return t[n]}function bo(t,e){return t.filter(n=>yn(n,e))}function pr(t){return t.filter(e=>e.static)}function At(t,e,n,r,o,i,s,c,l){if(e.static&&e.isDraggable!==!0||e.y===r&&e.x===n)return t;"Moving element ".concat(e.i," to [").concat(String(n),",").concat(String(r),"] from [").concat(e.x,",").concat(e.y,"]");const a=e.x,f=e.y;typeof n=="number"&&(e.x=n),typeof r=="number"&&(e.y=r),e.moved=!0;let m=_r(t,s);(s==="vertical"&&typeof r=="number"?f>=r:s==="horizontal"&&typeof n=="number"?a>=n:!1)&&(m=m.reverse());const g=bo(m,e),q=g.length>0;if(q&&l)return go(t);if(q&&i)return"Collision prevented on ".concat(e.i,", reverting."),e.x=a,e.y=f,e.moved=!1,t;for(let G=0,A=g.length;G<A;G++){const b=g[G];"Resolving collision between ".concat(e.i," at [").concat(e.x,",").concat(e.y,"] and ").concat(b.i," at [").concat(b.x,",").concat(b.y,"]"),!b.moved&&(b.static?t=tr(t,b,e,o,s):t=tr(t,e,b,o,s))}return t}function tr(t,e,n,r,o,i){const s=o==="horizontal",c=o==="vertical",l=e.static;if(r){r=!1;const m={x:s?Math.max(e.x-n.w,0):n.x,y:c?Math.max(e.y-n.h,0):n.y,w:n.w,h:n.h,i:"-1"},y=vt(t,m),g=y&&y.y+y.h>e.y,q=y&&e.x+e.w>y.x;if(y){if(g&&c)return At(t,n,void 0,n.y+1,r,l,o);if(g&&o==null)return e.y=n.y,n.y=n.y+n.h,t;if(q&&s)return At(t,e,n.x,void 0,r,l,o)}else return"Doing reverse collision on ".concat(n.i," up to [").concat(m.x,",").concat(m.y,"]."),At(t,n,s?m.x:void 0,c?m.y:void 0,r,l,o)}const a=s?n.x+1:void 0,f=c?n.y+1:void 0;return a==null&&f==null?t:At(t,n,s?n.x+1:void 0,c?n.y+1:void 0,r,l,o)}function as(t){return t*100+"%"}const wo=(t,e,n,r)=>t+n>r?e:n,So=(t,e,n)=>t<0?e:n,xo=t=>Math.max(0,t),hr=t=>Math.max(0,t),gr=(t,e,n)=>{let{left:r,height:o,width:i}=e;const s=t.top-(o-t.height);return{left:r,width:i,height:So(s,t.height,o),top:hr(s)}},mr=(t,e,n)=>{let{top:r,left:o,height:i,width:s}=e;return{top:r,height:i,width:wo(t.left,t.width,s,n),left:xo(o)}},yr=(t,e,n)=>{let{top:r,height:o,width:i}=e;const s=t.left-(i-t.width);return{height:o,width:s<0?t.width:wo(t.left,t.width,i,n),top:hr(r),left:xo(s)}},vr=(t,e,n)=>{let{top:r,left:o,height:i,width:s}=e;return{width:s,left:o,height:So(r,t.height,i),top:hr(r)}},ls=function(){return gr(arguments.length<=0?void 0:arguments[0],mr(...arguments))},cs=function(){return gr(arguments.length<=0?void 0:arguments[0],yr(...arguments))},us=function(){return vr(arguments.length<=0?void 0:arguments[0],mr(...arguments))},ds=function(){return vr(arguments.length<=0?void 0:arguments[0],yr(...arguments))},fs={n:gr,ne:ls,e:mr,se:us,s:vr,sw:ds,w:yr,nw:cs};function ps(t,e,n,r){const o=fs[t];return o?o(e,dn(dn({},e),n),r):n}function hs(t){let{top:e,left:n,width:r,height:o}=t;const i="translate(".concat(n,"px,").concat(e,"px)");return{transform:i,WebkitTransform:i,MozTransform:i,msTransform:i,OTransform:i,width:"".concat(r,"px"),height:"".concat(o,"px"),position:"absolute"}}function gs(t){let{top:e,left:n,width:r,height:o}=t;return{top:"".concat(e,"px"),left:"".concat(n,"px"),width:"".concat(r,"px"),height:"".concat(o,"px"),position:"absolute"}}function _r(t,e){return e==="horizontal"?Ro(t):e==="vertical"?Eo(t):t}function Eo(t){return t.slice(0).sort(function(e,n){return e.y>n.y||e.y===n.y&&e.x>n.x?1:e.y===n.y&&e.x===n.x?0:-1})}function Ro(t){return t.slice(0).sort(function(e,n){return e.x>n.x||e.x===n.x&&e.y>n.y?1:-1})}function ms(t,e,n,r,o){t=t||[];const i=[];Wt.default.Children.forEach(e,c=>{if(c?.key==null)return;const l=fr(t,String(c.key)),a=c.props["data-grid"];l&&a==null?i.push(bt(l)):a?i.push(bt(dn(dn({},a),{},{i:c.key}))):i.push(bt({w:1,h:1,x:0,y:mn(i),i:String(c.key)}))});const s=_o(i,{cols:n});return o?s:yo(s,r,n)}function ys(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Layout";const n=["x","y","w","h"];if(!Array.isArray(t))throw new Error(e+" must be an array!");for(let r=0,o=t.length;r<o;r++){const i=t[r];for(let s=0;s<n.length;s++){const c=n[s],l=i[c];if(typeof l!="number"||Number.isNaN(l))throw new Error("ReactGridLayout: ".concat(e,"[").concat(r,"].").concat(c," must be a number! Received: ").concat(l," (").concat(typeof l,")"))}if(typeof i.i<"u"&&typeof i.i!="string")throw new Error("ReactGridLayout: ".concat(e,"[").concat(r,"].i must be a string! Received: ").concat(i.i," (").concat(typeof i.i,")"))}}function vs(t){const{verticalCompact:e,compactType:n}=t||{};return e===!1?null:n}const _s=()=>{};J.noop=_s;var Ke={};Object.defineProperty(Ke,"__esModule",{value:!0});Ke.calcGridColWidth=vn;Ke.calcGridItemPosition=bs;Ke.calcGridItemWHPx=nr;Ke.calcWH=Ss;Ke.calcXY=ws;Ke.clamp=_t;function vn(t){const{margin:e,containerPadding:n,containerWidth:r,cols:o}=t;return(r-e[0]*(o-1)-n[0]*2)/o}function nr(t,e,n){return Number.isFinite(t)?Math.round(e*t+Math.max(0,t-1)*n):t}function bs(t,e,n,r,o,i){const{margin:s,containerPadding:c,rowHeight:l}=t,a=vn(t),f={};return i&&i.resizing?(f.width=Math.round(i.resizing.width),f.height=Math.round(i.resizing.height)):(f.width=nr(r,a,s[0]),f.height=nr(o,l,s[1])),i&&i.dragging?(f.top=Math.round(i.dragging.top),f.left=Math.round(i.dragging.left)):i&&i.resizing&&typeof i.resizing.top=="number"&&typeof i.resizing.left=="number"?(f.top=Math.round(i.resizing.top),f.left=Math.round(i.resizing.left)):(f.top=Math.round((l+s[1])*n+c[1]),f.left=Math.round((a+s[0])*e+c[0])),f}function ws(t,e,n,r,o){const{margin:i,containerPadding:s,cols:c,rowHeight:l,maxRows:a}=t,f=vn(t);let m=Math.round((n-s[0])/(f+i[0])),y=Math.round((e-s[1])/(l+i[1]));return m=_t(m,0,c-r),y=_t(y,0,a-o),{x:m,y}}function Ss(t,e,n,r,o,i){const{margin:s,maxRows:c,cols:l,rowHeight:a}=t,f=vn(t);let m=Math.round((e+s[0])/(f+s[0])),y=Math.round((n+s[1])/(a+s[1])),g=_t(m,0,l-r),q=_t(y,0,c-o);return["sw","w","nw"].indexOf(i)!==-1&&(g=_t(m,0,l)),["nw","n","ne"].indexOf(i)!==-1&&(q=_t(y,0,c)),{w:g,h:q}}function _t(t,e,n){return Math.max(Math.min(t,n),e)}var _n={},Oo={exports:{}},xs="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Es=xs,Rs=Es;function Po(){}function Co(){}Co.resetWarningCache=Po;var Os=function(){function t(r,o,i,s,c,l){if(l!==Rs){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:Co,resetWarningCache:Po};return n.PropTypes=n,n};Oo.exports=Os();var ct=Oo.exports,bn={exports:{}},Mo={},ve={},Je={};Object.defineProperty(Je,"__esModule",{value:!0});Je.dontSetMe=Ts;Je.findInArray=Ps;Je.int=Ds;Je.isFunction=Cs;Je.isNum=Ms;function Ps(t,e){for(let n=0,r=t.length;n<r;n++)if(e.apply(e,[t[n],n,t]))return t[n]}function Cs(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function Ms(t){return typeof t=="number"&&!isNaN(t)}function Ds(t){return parseInt(t,10)}function Ts(t,e,n){if(t[e])return new Error(`Invalid prop ${e} passed to ${n} - do not set this, set it on the child.`)}var wt={};Object.defineProperty(wt,"__esModule",{value:!0});wt.browserPrefixToKey=To;wt.browserPrefixToStyle=zs;wt.default=void 0;wt.getPrefix=Do;const An=["Moz","Webkit","O","ms"];function Do(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const e=window.document?.documentElement?.style;if(!e||t in e)return"";for(let n=0;n<An.length;n++)if(To(t,An[n])in e)return An[n];return""}function To(t,e){return e?`${e}${Ns(t)}`:t}function zs(t,e){return e?`-${e.toLowerCase()}-${t}`:t}function Ns(t){let e="",n=!0;for(let r=0;r<t.length;r++)n?(e+=t[r].toUpperCase(),n=!1):t[r]==="-"?n=!0:e+=t[r];return e}wt.default=Do();Object.defineProperty(ve,"__esModule",{value:!0});ve.addClassName=ko;ve.addEvent=js;ve.addUserSelectStyles=Ys;ve.createCSSTransform=Is;ve.createSVGTransform=Fs;ve.getTouch=qs;ve.getTouchIdentifier=Gs;ve.getTranslation=br;ve.innerHeight=Ws;ve.innerWidth=As;ve.matchesSelector=No;ve.matchesSelectorAndParentsTo=ks;ve.offsetXYFromParent=Bs;ve.outerHeight=Ls;ve.outerWidth=$s;ve.removeClassName=jo;ve.removeEvent=Hs;ve.scheduleRemoveUserSelectStyles=Us;var qe=Je,Xr=zo(wt);function zo(t,e){if(typeof WeakMap=="function")var n=new WeakMap,r=new WeakMap;return(zo=function(o,i){if(!i&&o&&o.__esModule)return o;var s,c,l={__proto__:null,default:o};if(o===null||typeof o!="object"&&typeof o!="function")return l;if(s=i?r:n){if(s.has(o))return s.get(o);s.set(o,l)}for(const a in o)a!=="default"&&{}.hasOwnProperty.call(o,a)&&((c=(s=Object.defineProperty)&&Object.getOwnPropertyDescriptor(o,a))&&(c.get||c.set)?s(l,a,c):l[a]=o[a]);return l})(t,e)}let rn="";function No(t,e){return rn||(rn=(0,qe.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,qe.isFunction)(t[n])})),(0,qe.isFunction)(t[rn])?t[rn](e):!1}function ks(t,e,n){let r=t;do{if(No(r,e))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function js(t,e,n,r){if(!t)return;const o={capture:!0,...r};t.addEventListener?t.addEventListener(e,n,o):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}function Hs(t,e,n,r){if(!t)return;const o={capture:!0,...r};t.removeEventListener?t.removeEventListener(e,n,o):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null}function Ls(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,qe.int)(n.borderTopWidth),e+=(0,qe.int)(n.borderBottomWidth),e}function $s(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,qe.int)(n.borderLeftWidth),e+=(0,qe.int)(n.borderRightWidth),e}function Ws(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,qe.int)(n.paddingTop),e-=(0,qe.int)(n.paddingBottom),e}function As(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,qe.int)(n.paddingLeft),e-=(0,qe.int)(n.paddingRight),e}function Bs(t,e,n){const o=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),i=(t.clientX+e.scrollLeft-o.left)/n,s=(t.clientY+e.scrollTop-o.top)/n;return{x:i,y:s}}function Is(t,e){const n=br(t,e,"px");return{[(0,Xr.browserPrefixToKey)("transform",Xr.default)]:n}}function Fs(t,e){return br(t,e,"")}function br(t,e,n){let{x:r,y:o}=t,i=`translate(${r}${n},${o}${n})`;if(e){const s=`${typeof e.x=="string"?e.x:e.x+n}`,c=`${typeof e.y=="string"?e.y:e.y+n}`;i=`translate(${s}, ${c})`+i}return i}function qs(t,e){return t.targetTouches&&(0,qe.findInArray)(t.targetTouches,n=>e===n.identifier)||t.changedTouches&&(0,qe.findInArray)(t.changedTouches,n=>e===n.identifier)}function Gs(t){if(t.targetTouches&&t.targetTouches[0])return t.targetTouches[0].identifier;if(t.changedTouches&&t.changedTouches[0])return t.changedTouches[0].identifier}function Ys(t){if(!t)return;let e=t.getElementById("react-draggable-style-el");e||(e=t.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,t.getElementsByTagName("head")[0].appendChild(e)),t.body&&ko(t.body,"react-draggable-transparent-selection")}function Us(t){window.requestAnimationFrame?window.requestAnimationFrame(()=>{Vr(t)}):Vr(t)}function Vr(t){if(t)try{if(t.body&&jo(t.body,"react-draggable-transparent-selection"),t.selection)t.selection.empty();else{const e=(t.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function ko(t,e){t.classList?t.classList.add(e):t.className.match(new RegExp(`(?:^|\\s)${e}(?!\\S)`))||(t.className+=` ${e}`)}function jo(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp(`(?:^|\\s)${e}(?!\\S)`,"g"),"")}var Qe={};Object.defineProperty(Qe,"__esModule",{value:!0});Qe.canDragX=Ks;Qe.canDragY=Js;Qe.createCoreData=Zs;Qe.createDraggableData=ea;Qe.getBoundPosition=Xs;Qe.getControlPosition=Qs;Qe.snapToGrid=Vs;var Fe=Je,Dt=ve;function Xs(t,e,n){if(!t.props.bounds)return[e,n];let{bounds:r}=t.props;r=typeof r=="string"?r:ta(r);const o=wr(t);if(typeof r=="string"){const{ownerDocument:i}=o,s=i.defaultView;let c;if(r==="parent"?c=o.parentNode:c=o.getRootNode().querySelector(r),!(c instanceof s.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');const l=c,a=s.getComputedStyle(o),f=s.getComputedStyle(l);r={left:-o.offsetLeft+(0,Fe.int)(f.paddingLeft)+(0,Fe.int)(a.marginLeft),top:-o.offsetTop+(0,Fe.int)(f.paddingTop)+(0,Fe.int)(a.marginTop),right:(0,Dt.innerWidth)(l)-(0,Dt.outerWidth)(o)-o.offsetLeft+(0,Fe.int)(f.paddingRight)-(0,Fe.int)(a.marginRight),bottom:(0,Dt.innerHeight)(l)-(0,Dt.outerHeight)(o)-o.offsetTop+(0,Fe.int)(f.paddingBottom)-(0,Fe.int)(a.marginBottom)}}return(0,Fe.isNum)(r.right)&&(e=Math.min(e,r.right)),(0,Fe.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,Fe.isNum)(r.left)&&(e=Math.max(e,r.left)),(0,Fe.isNum)(r.top)&&(n=Math.max(n,r.top)),[e,n]}function Vs(t,e,n){const r=Math.round(e/t[0])*t[0],o=Math.round(n/t[1])*t[1];return[r,o]}function Ks(t){return t.props.axis==="both"||t.props.axis==="x"}function Js(t){return t.props.axis==="both"||t.props.axis==="y"}function Qs(t,e,n){const r=typeof e=="number"?(0,Dt.getTouch)(t,e):null;if(typeof e=="number"&&!r)return null;const o=wr(n),i=n.props.offsetParent||o.offsetParent||o.ownerDocument.body;return(0,Dt.offsetXYFromParent)(r||t,i,n.props.scale)}function Zs(t,e,n){const r=!(0,Fe.isNum)(t.lastX),o=wr(t);return r?{node:o,deltaX:0,deltaY:0,lastX:e,lastY:n,x:e,y:n}:{node:o,deltaX:e-t.lastX,deltaY:n-t.lastY,lastX:t.lastX,lastY:t.lastY,x:e,y:n}}function ea(t,e){const n=t.props.scale;return{node:e.node,x:t.state.x+e.deltaX/n,y:t.state.y+e.deltaY/n,deltaX:e.deltaX/n,deltaY:e.deltaY/n,lastX:t.state.x,lastY:t.state.y}}function ta(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}function wr(t){const e=t.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var wn={},Sn={};Object.defineProperty(Sn,"__esModule",{value:!0});Sn.default=na;function na(){}Object.defineProperty(wn,"__esModule",{value:!0});wn.default=void 0;var Bn=Ho(N),Le=Sr(ct),ra=Sr(ur),je=ve,at=Qe,In=Je,Ht=Sr(Sn);function Sr(t){return t&&t.__esModule?t:{default:t}}function Ho(t,e){if(typeof WeakMap=="function")var n=new WeakMap,r=new WeakMap;return(Ho=function(o,i){if(!i&&o&&o.__esModule)return o;var s,c,l={__proto__:null,default:o};if(o===null||typeof o!="object"&&typeof o!="function")return l;if(s=i?r:n){if(s.has(o))return s.get(o);s.set(o,l)}for(const a in o)a!=="default"&&{}.hasOwnProperty.call(o,a)&&((c=(s=Object.defineProperty)&&Object.getOwnPropertyDescriptor(o,a))&&(c.get||c.set)?s(l,a,c):l[a]=o[a]);return l})(t,e)}function $e(t,e,n){return(e=oa(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oa(t){var e=ia(t,"string");return typeof e=="symbol"?e:e+""}function ia(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const Xe={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let lt=Xe.mouse,xn=class extends Bn.Component{constructor(){super(...arguments),$e(this,"dragging",!1),$e(this,"lastX",NaN),$e(this,"lastY",NaN),$e(this,"touchIdentifier",null),$e(this,"mounted",!1),$e(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&typeof e.button=="number"&&e.button!==0)return!1;const n=this.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:r}=n;if(this.props.disabled||!(e.target instanceof r.defaultView.Node)||this.props.handle&&!(0,je.matchesSelectorAndParentsTo)(e.target,this.props.handle,n)||this.props.cancel&&(0,je.matchesSelectorAndParentsTo)(e.target,this.props.cancel,n))return;e.type==="touchstart"&&!this.props.allowMobileScroll&&e.preventDefault();const o=(0,je.getTouchIdentifier)(e);this.touchIdentifier=o;const i=(0,at.getControlPosition)(e,o,this);if(i==null)return;const{x:s,y:c}=i,l=(0,at.createCoreData)(this,s,c);(0,Ht.default)("DraggableCore: handleDragStart: %j",l),(0,Ht.default)("calling",this.props.onStart),!(this.props.onStart(e,l)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,je.addUserSelectStyles)(r),this.dragging=!0,this.lastX=s,this.lastY=c,(0,je.addEvent)(r,lt.move,this.handleDrag),(0,je.addEvent)(r,lt.stop,this.handleDragStop))}),$e(this,"handleDrag",e=>{const n=(0,at.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:o}=n;if(Array.isArray(this.props.grid)){let c=r-this.lastX,l=o-this.lastY;if([c,l]=(0,at.snapToGrid)(this.props.grid,c,l),!c&&!l)return;r=this.lastX+c,o=this.lastY+l}const i=(0,at.createCoreData)(this,r,o);if((0,Ht.default)("DraggableCore: handleDrag: %j",i),this.props.onDrag(e,i)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const l=document.createEvent("MouseEvents");l.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(l)}return}this.lastX=r,this.lastY=o}),$e(this,"handleDragStop",e=>{if(!this.dragging)return;const n=(0,at.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:o}=n;if(Array.isArray(this.props.grid)){let l=r-this.lastX||0,a=o-this.lastY||0;[l,a]=(0,at.snapToGrid)(this.props.grid,l,a),r=this.lastX+l,o=this.lastY+a}const i=(0,at.createCoreData)(this,r,o);if(this.props.onStop(e,i)===!1||this.mounted===!1)return!1;const c=this.findDOMNode();c&&this.props.enableUserSelectHack&&(0,je.scheduleRemoveUserSelectStyles)(c.ownerDocument),(0,Ht.default)("DraggableCore: handleDragStop: %j",i),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,c&&((0,Ht.default)("DraggableCore: Removing handlers"),(0,je.removeEvent)(c.ownerDocument,lt.move,this.handleDrag),(0,je.removeEvent)(c.ownerDocument,lt.stop,this.handleDragStop))}),$e(this,"onMouseDown",e=>(lt=Xe.mouse,this.handleDragStart(e))),$e(this,"onMouseUp",e=>(lt=Xe.mouse,this.handleDragStop(e))),$e(this,"onTouchStart",e=>(lt=Xe.touch,this.handleDragStart(e))),$e(this,"onTouchEnd",e=>(lt=Xe.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,je.addEvent)(e,Xe.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:n}=e;(0,je.removeEvent)(n,Xe.mouse.move,this.handleDrag),(0,je.removeEvent)(n,Xe.touch.move,this.handleDrag),(0,je.removeEvent)(n,Xe.mouse.stop,this.handleDragStop),(0,je.removeEvent)(n,Xe.touch.stop,this.handleDragStop),(0,je.removeEvent)(e,Xe.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,je.scheduleRemoveUserSelectStyles)(n)}}findDOMNode(){return this.props?.nodeRef?this.props?.nodeRef?.current:ra.default.findDOMNode(this)}render(){return Bn.cloneElement(Bn.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};wn.default=xn;$e(xn,"displayName","DraggableCore");$e(xn,"propTypes",{allowAnyClick:Le.default.bool,allowMobileScroll:Le.default.bool,children:Le.default.node.isRequired,disabled:Le.default.bool,enableUserSelectHack:Le.default.bool,offsetParent:function(t,e){if(t[e]&&t[e].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:Le.default.arrayOf(Le.default.number),handle:Le.default.string,cancel:Le.default.string,nodeRef:Le.default.object,onStart:Le.default.func,onDrag:Le.default.func,onStop:Le.default.func,onMouseDown:Le.default.func,scale:Le.default.number,className:In.dontSetMe,style:In.dontSetMe,transform:In.dontSetMe});$e(xn,"defaultProps",{allowAnyClick:!1,allowMobileScroll:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return l.default}}),t.default=void 0;var e=m(N),n=f(ct),r=f(ur),o=gn,i=ve,s=Qe,c=Je,l=f(wn),a=f(Sn);function f(b){return b&&b.__esModule?b:{default:b}}function m(b,w){if(typeof WeakMap=="function")var C=new WeakMap,k=new WeakMap;return(m=function(x,$){if(!$&&x&&x.__esModule)return x;var he,ye,ze={__proto__:null,default:x};if(x===null||typeof x!="object"&&typeof x!="function")return ze;if(he=$?k:C){if(he.has(x))return he.get(x);he.set(x,ze)}for(const He in x)He!=="default"&&{}.hasOwnProperty.call(x,He)&&((ye=(he=Object.defineProperty)&&Object.getOwnPropertyDescriptor(x,He))&&(ye.get||ye.set)?he(ze,He,ye):ze[He]=x[He]);return ze})(b,w)}function y(){return y=Object.assign?Object.assign.bind():function(b){for(var w=1;w<arguments.length;w++){var C=arguments[w];for(var k in C)({}).hasOwnProperty.call(C,k)&&(b[k]=C[k])}return b},y.apply(null,arguments)}function g(b,w,C){return(w=q(w))in b?Object.defineProperty(b,w,{value:C,enumerable:!0,configurable:!0,writable:!0}):b[w]=C,b}function q(b){var w=G(b,"string");return typeof w=="symbol"?w:w+""}function G(b,w){if(typeof b!="object"||!b)return b;var C=b[Symbol.toPrimitive];if(C!==void 0){var k=C.call(b,w);if(typeof k!="object")return k;throw new TypeError("@@toPrimitive must return a primitive value.")}return(w==="string"?String:Number)(b)}class A extends e.Component{static getDerivedStateFromProps(w,C){let{position:k}=w,{prevPropsPosition:x}=C;return k&&(!x||k.x!==x.x||k.y!==x.y)?((0,a.default)("Draggable: getDerivedStateFromProps %j",{position:k,prevPropsPosition:x}),{x:k.x,y:k.y,prevPropsPosition:{...k}}):null}constructor(w){super(w),g(this,"onDragStart",(C,k)=>{if((0,a.default)("Draggable: onDragStart: %j",k),this.props.onStart(C,(0,s.createDraggableData)(this,k))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),g(this,"onDrag",(C,k)=>{if(!this.state.dragging)return!1;(0,a.default)("Draggable: onDrag: %j",k);const x=(0,s.createDraggableData)(this,k),$={x:x.x,y:x.y,slackX:0,slackY:0};if(this.props.bounds){const{x:ye,y:ze}=$;$.x+=this.state.slackX,$.y+=this.state.slackY;const[He,rt]=(0,s.getBoundPosition)(this,$.x,$.y);$.x=He,$.y=rt,$.slackX=this.state.slackX+(ye-$.x),$.slackY=this.state.slackY+(ze-$.y),x.x=$.x,x.y=$.y,x.deltaX=$.x-this.state.x,x.deltaY=$.y-this.state.y}if(this.props.onDrag(C,x)===!1)return!1;this.setState($)}),g(this,"onDragStop",(C,k)=>{if(!this.state.dragging||this.props.onStop(C,(0,s.createDraggableData)(this,k))===!1)return!1;(0,a.default)("Draggable: onDragStop: %j",k);const $={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:ye,y:ze}=this.props.position;$.x=ye,$.y=ze}this.setState($)}),this.state={dragging:!1,dragged:!1,x:w.position?w.position.x:w.defaultPosition.x,y:w.position?w.position.y:w.defaultPosition.y,prevPropsPosition:{...w.position},slackX:0,slackY:0,isElementSVG:!1},w.position&&!(w.onDrag||w.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.state.dragging&&this.setState({dragging:!1})}findDOMNode(){return this.props?.nodeRef?.current??r.default.findDOMNode(this)}render(){const{axis:w,bounds:C,children:k,defaultPosition:x,defaultClassName:$,defaultClassNameDragging:he,defaultClassNameDragged:ye,position:ze,positionOffset:He,scale:rt,...ut}=this.props;let ot={},dt=null;const it=!!!ze||this.state.dragging,Ze=ze||x,Et={x:(0,s.canDragX)(this)&&it?this.state.x:Ze.x,y:(0,s.canDragY)(this)&&it?this.state.y:Ze.y};this.state.isElementSVG?dt=(0,i.createSVGTransform)(Et,He):ot=(0,i.createCSSTransform)(Et,He);const le=(0,o.clsx)(k.props.className||"",$,{[he]:this.state.dragging,[ye]:this.state.dragged});return e.createElement(l.default,y({},ut,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(k),{className:le,style:{...k.props.style,...ot},transform:dt}))}}t.default=A,g(A,"displayName","Draggable"),g(A,"propTypes",{...l.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:c.dontSetMe,style:c.dontSetMe,transform:c.dontSetMe}),g(A,"defaultProps",{...l.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(Mo);const{default:Lo,DraggableCore:sa}=Mo;bn.exports=Lo;bn.exports.default=Lo;bn.exports.DraggableCore=sa;var $o=bn.exports,En={exports:{}},Ft={},xr={};xr.__esModule=!0;xr.cloneElement=fa;var aa=la(N);function la(t){return t&&t.__esModule?t:{default:t}}function Kr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function Jr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Kr(Object(n),!0).forEach(function(r){ca(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Kr(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ca(t,e,n){return e=ua(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ua(t){var e=da(t,"string");return typeof e=="symbol"?e:String(e)}function da(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fa(t,e){return e.style&&t.props.style&&(e.style=Jr(Jr({},t.props.style),e.style)),e.className&&t.props.className&&(e.className=t.props.className+" "+e.className),aa.default.cloneElement(t,e)}var qt={};qt.__esModule=!0;qt.resizableProps=void 0;var X=pa(ct);function pa(t){return t&&t.__esModule?t:{default:t}}var ha={axis:X.default.oneOf(["both","x","y","none"]),className:X.default.string,children:X.default.element.isRequired,draggableOpts:X.default.shape({allowAnyClick:X.default.bool,cancel:X.default.string,children:X.default.node,disabled:X.default.bool,enableUserSelectHack:X.default.bool,offsetParent:X.default.node,grid:X.default.arrayOf(X.default.number),handle:X.default.string,nodeRef:X.default.object,onStart:X.default.func,onDrag:X.default.func,onStop:X.default.func,onMouseDown:X.default.func,scale:X.default.number}),height:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=n[0];if(o.axis==="both"||o.axis==="y"){var i;return(i=X.default.number).isRequired.apply(i,n)}return X.default.number.apply(X.default,n)},handle:X.default.oneOfType([X.default.node,X.default.func]),handleSize:X.default.arrayOf(X.default.number),lockAspectRatio:X.default.bool,maxConstraints:X.default.arrayOf(X.default.number),minConstraints:X.default.arrayOf(X.default.number),onResizeStop:X.default.func,onResizeStart:X.default.func,onResize:X.default.func,resizeHandles:X.default.arrayOf(X.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),transformScale:X.default.number,width:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=n[0];if(o.axis==="both"||o.axis==="x"){var i;return(i=X.default.number).isRequired.apply(i,n)}return X.default.number.apply(X.default,n)}};qt.resizableProps=ha;Ft.__esModule=!0;Ft.default=void 0;var Lt=_a(N),ga=$o,ma=xr,ya=qt,va=["children","className","draggableOpts","width","height","handle","handleSize","lockAspectRatio","axis","minConstraints","maxConstraints","onResize","onResizeStop","onResizeStart","resizeHandles","transformScale"];function Wo(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(Wo=function(o){return o?n:e})(t)}function _a(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=Wo(e);if(n&&n.has(t))return n.get(t);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(i!=="default"&&Object.prototype.hasOwnProperty.call(t,i)){var s=o?Object.getOwnPropertyDescriptor(t,i):null;s&&(s.get||s.set)?Object.defineProperty(r,i,s):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}function rr(){return rr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rr.apply(this,arguments)}function ba(t,e){if(t==null)return{};var n={},r=Object.keys(t),o,i;for(i=0;i<r.length;i++)o=r[i],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}function Qr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function Fn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Qr(Object(n),!0).forEach(function(r){wa(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Qr(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wa(t,e,n){return e=Sa(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Sa(t){var e=xa(t,"string");return typeof e=="symbol"?e:String(e)}function xa(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ea(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,or(t,e)}function or(t,e){return or=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},or(t,e)}var Er=function(t){Ea(e,t);function e(){for(var r,o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=t.call.apply(t,[this].concat(i))||this,r.handleRefs={},r.lastHandleRect=null,r.slack=null,r}var n=e.prototype;return n.componentWillUnmount=function(){this.resetData()},n.resetData=function(){this.lastHandleRect=this.slack=null},n.runConstraints=function(o,i){var s=this.props,c=s.minConstraints,l=s.maxConstraints,a=s.lockAspectRatio;if(!c&&!l&&!a)return[o,i];if(a){var f=this.props.width/this.props.height,m=o-this.props.width,y=i-this.props.height;Math.abs(m)>Math.abs(y*f)?i=o/f:o=i*f}var g=o,q=i,G=this.slack||[0,0],A=G[0],b=G[1];return o+=A,i+=b,c&&(o=Math.max(c[0],o),i=Math.max(c[1],i)),l&&(o=Math.min(l[0],o),i=Math.min(l[1],i)),this.slack=[A+(g-o),b+(q-i)],[o,i]},n.resizeHandler=function(o,i){var s=this;return function(c,l){var a=l.node,f=l.deltaX,m=l.deltaY;o==="onResizeStart"&&s.resetData();var y=(s.props.axis==="both"||s.props.axis==="x")&&i!=="n"&&i!=="s",g=(s.props.axis==="both"||s.props.axis==="y")&&i!=="e"&&i!=="w";if(!(!y&&!g)){var q=i[0],G=i[i.length-1],A=a.getBoundingClientRect();if(s.lastHandleRect!=null){if(G==="w"){var b=A.left-s.lastHandleRect.left;f+=b}if(q==="n"){var w=A.top-s.lastHandleRect.top;m+=w}}s.lastHandleRect=A,G==="w"&&(f=-f),q==="n"&&(m=-m);var C=s.props.width+(y?f/s.props.transformScale:0),k=s.props.height+(g?m/s.props.transformScale:0),x=s.runConstraints(C,k);C=x[0],k=x[1];var $=C!==s.props.width||k!==s.props.height,he=typeof s.props[o]=="function"?s.props[o]:null,ye=o==="onResize"&&!$;he&&!ye&&(c.persist==null||c.persist(),he(c,{node:a,size:{width:C,height:k},handle:i})),o==="onResizeStop"&&s.resetData()}}},n.renderResizeHandle=function(o,i){var s=this.props.handle;if(!s)return Lt.createElement("span",{className:"react-resizable-handle react-resizable-handle-"+o,ref:i});if(typeof s=="function")return s(o,i);var c=typeof s.type=="string",l=Fn({ref:i},c?{}:{handleAxis:o});return Lt.cloneElement(s,l)},n.render=function(){var o=this,i=this.props,s=i.children,c=i.className,l=i.draggableOpts;i.width,i.height,i.handle,i.handleSize,i.lockAspectRatio,i.axis,i.minConstraints,i.maxConstraints,i.onResize,i.onResizeStop,i.onResizeStart;var a=i.resizeHandles;i.transformScale;var f=ba(i,va);return(0,ma.cloneElement)(s,Fn(Fn({},f),{},{className:(c?c+" ":"")+"react-resizable",children:[].concat(s.props.children,a.map(function(m){var y,g=(y=o.handleRefs[m])!=null?y:o.handleRefs[m]=Lt.createRef();return Lt.createElement(ga.DraggableCore,rr({},l,{nodeRef:g,key:"resizableHandle-"+m,onStop:o.resizeHandler("onResizeStop",m),onStart:o.resizeHandler("onResizeStart",m),onDrag:o.resizeHandler("onResize",m)}),o.renderResizeHandle(m,g))}))}))},e}(Lt.Component);Ft.default=Er;Er.propTypes=ya.resizableProps;Er.defaultProps={axis:"both",handleSize:[20,20],lockAspectRatio:!1,minConstraints:[20,20],maxConstraints:[1/0,1/0],resizeHandles:["se"],transformScale:1};var Rn={};Rn.__esModule=!0;Rn.default=void 0;var qn=Ma(N),Ra=Ao(ct),Oa=Ao(Ft),Pa=qt,Ca=["handle","handleSize","onResize","onResizeStart","onResizeStop","draggableOpts","minConstraints","maxConstraints","lockAspectRatio","axis","width","height","resizeHandles","style","transformScale"];function Ao(t){return t&&t.__esModule?t:{default:t}}function Bo(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(Bo=function(o){return o?n:e})(t)}function Ma(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=Bo(e);if(n&&n.has(t))return n.get(t);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(i!=="default"&&Object.prototype.hasOwnProperty.call(t,i)){var s=o?Object.getOwnPropertyDescriptor(t,i):null;s&&(s.get||s.set)?Object.defineProperty(r,i,s):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}function ir(){return ir=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ir.apply(this,arguments)}function Zr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function fn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Zr(Object(n),!0).forEach(function(r){Da(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Zr(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Da(t,e,n){return e=Ta(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ta(t){var e=za(t,"string");return typeof e=="symbol"?e:String(e)}function za(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Na(t,e){if(t==null)return{};var n={},r=Object.keys(t),o,i;for(i=0;i<r.length;i++)o=r[i],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}function ka(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,sr(t,e)}function sr(t,e){return sr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},sr(t,e)}var Io=function(t){ka(e,t);function e(){for(var r,o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=t.call.apply(t,[this].concat(i))||this,r.state={width:r.props.width,height:r.props.height,propsWidth:r.props.width,propsHeight:r.props.height},r.onResize=function(c,l){var a=l.size;r.props.onResize?(c.persist==null||c.persist(),r.setState(a,function(){return r.props.onResize&&r.props.onResize(c,l)})):r.setState(a)},r}e.getDerivedStateFromProps=function(o,i){return i.propsWidth!==o.width||i.propsHeight!==o.height?{width:o.width,height:o.height,propsWidth:o.width,propsHeight:o.height}:null};var n=e.prototype;return n.render=function(){var o=this.props,i=o.handle,s=o.handleSize;o.onResize;var c=o.onResizeStart,l=o.onResizeStop,a=o.draggableOpts,f=o.minConstraints,m=o.maxConstraints,y=o.lockAspectRatio,g=o.axis;o.width,o.height;var q=o.resizeHandles,G=o.style,A=o.transformScale,b=Na(o,Ca);return qn.createElement(Oa.default,{axis:g,draggableOpts:a,handle:i,handleSize:s,height:this.state.height,lockAspectRatio:y,maxConstraints:m,minConstraints:f,onResizeStart:c,onResize:this.onResize,onResizeStop:l,resizeHandles:q,transformScale:A,width:this.state.width},qn.createElement("div",ir({},b,{style:fn(fn({},G),{},{width:this.state.width+"px",height:this.state.height+"px"})})))},e}(qn.Component);Rn.default=Io;Io.propTypes=fn(fn({},Pa.resizableProps),{},{children:Ra.default.element});En.exports=function(){throw new Error("Don't instantiate Resizable directly! Use require('react-resizable').Resizable")};En.exports.Resizable=Ft.default;En.exports.ResizableBox=Rn.default;var ja=En.exports,nt={};Object.defineProperty(nt,"__esModule",{value:!0});nt.resizeHandleType=nt.resizeHandleAxesType=nt.default=void 0;var V=Fo(ct),Ha=Fo(N);function Fo(t){return t&&t.__esModule?t:{default:t}}const La=nt.resizeHandleAxesType=V.default.arrayOf(V.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),$a=nt.resizeHandleType=V.default.oneOfType([V.default.node,V.default.func]);nt.default={className:V.default.string,style:V.default.object,width:V.default.number,autoSize:V.default.bool,cols:V.default.number,draggableCancel:V.default.string,draggableHandle:V.default.string,verticalCompact:function(t){t.verticalCompact},compactType:V.default.oneOf(["vertical","horizontal"]),layout:function(t){var e=t.layout;e!==void 0&&J.validateLayout(e,"layout")},margin:V.default.arrayOf(V.default.number),containerPadding:V.default.arrayOf(V.default.number),rowHeight:V.default.number,maxRows:V.default.number,isBounded:V.default.bool,isDraggable:V.default.bool,isResizable:V.default.bool,allowOverlap:V.default.bool,preventCollision:V.default.bool,useCSSTransforms:V.default.bool,transformScale:V.default.number,isDroppable:V.default.bool,resizeHandles:La,resizeHandle:$a,onLayoutChange:V.default.func,onDragStart:V.default.func,onDrag:V.default.func,onDragStop:V.default.func,onResizeStart:V.default.func,onResize:V.default.func,onResizeStop:V.default.func,onDrop:V.default.func,droppingItem:V.default.shape({i:V.default.string.isRequired,w:V.default.number.isRequired,h:V.default.number.isRequired}),children:function(t,e){const n=t[e],r={};Ha.default.Children.forEach(n,function(o){if(o?.key!=null){if(r[o.key])throw new Error('Duplicate child key "'+o.key+'" found! This will cause problems in ReactGridLayout.');r[o.key]=!0}})},innerRef:V.default.any};Object.defineProperty(_n,"__esModule",{value:!0});_n.default=void 0;var Pt=Rr(N),eo=ur,se=Rr(ct),Wa=$o,Aa=ja,Ct=J,De=Ke,to=nt,Ba=Rr(gn);function Rr(t){return t&&t.__esModule?t:{default:t}}function no(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function Gn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?no(Object(n),!0).forEach(function(r){Ve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):no(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ve(t,e,n){return(e=Ia(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ia(t){var e=Fa(t,"string");return typeof e=="symbol"?e:e+""}function Fa(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class Or extends Pt.default.Component{constructor(){super(...arguments),Ve(this,"state",{resizing:null,dragging:null,className:""}),Ve(this,"elementRef",Pt.default.createRef()),Ve(this,"onDragStart",(e,n)=>{let{node:r}=n;const{onDragStart:o,transformScale:i}=this.props;if(!o)return;const s={top:0,left:0},{offsetParent:c}=r;if(!c)return;const l=c.getBoundingClientRect(),a=r.getBoundingClientRect(),f=a.left/i,m=l.left/i,y=a.top/i,g=l.top/i;s.left=f-m+c.scrollLeft,s.top=y-g+c.scrollTop,this.setState({dragging:s});const{x:q,y:G}=(0,De.calcXY)(this.getPositionParams(),s.top,s.left,this.props.w,this.props.h);return o.call(this,this.props.i,q,G,{e,node:r,newPosition:s})}),Ve(this,"onDrag",(e,n,r)=>{let{node:o,deltaX:i,deltaY:s}=n;const{onDrag:c}=this.props;if(!c)return;if(!this.state.dragging)throw new Error("onDrag called before onDragStart.");let l=this.state.dragging.top+s,a=this.state.dragging.left+i;const{isBounded:f,i:m,w:y,h:g,containerWidth:q}=this.props,G=this.getPositionParams();if(f){const{offsetParent:C}=o;if(C){const{margin:k,rowHeight:x}=this.props,$=C.clientHeight-(0,De.calcGridItemWHPx)(g,x,k[1]);l=(0,De.clamp)(l,0,$);const he=(0,De.calcGridColWidth)(G),ye=q-(0,De.calcGridItemWHPx)(y,he,k[0]);a=(0,De.clamp)(a,0,ye)}}const A={top:l,left:a};r?this.setState({dragging:A}):(0,eo.flushSync)(()=>{this.setState({dragging:A})});const{x:b,y:w}=(0,De.calcXY)(G,l,a,y,g);return c.call(this,m,b,w,{e,node:o,newPosition:A})}),Ve(this,"onDragStop",(e,n)=>{let{node:r}=n;const{onDragStop:o}=this.props;if(!o)return;if(!this.state.dragging)throw new Error("onDragEnd called before onDragStart.");const{w:i,h:s,i:c}=this.props,{left:l,top:a}=this.state.dragging,f={top:a,left:l};this.setState({dragging:null});const{x:m,y}=(0,De.calcXY)(this.getPositionParams(),a,l,i,s);return o.call(this,c,m,y,{e,node:r,newPosition:f})}),Ve(this,"onResizeStop",(e,n,r)=>this.onResizeHandler(e,n,r,"onResizeStop")),Ve(this,"onResizeStart",(e,n,r)=>this.onResizeHandler(e,n,r,"onResizeStart")),Ve(this,"onResize",(e,n,r)=>this.onResizeHandler(e,n,r,"onResize"))}shouldComponentUpdate(e,n){if(this.props.children!==e.children||this.props.droppingPosition!==e.droppingPosition)return!0;const r=(0,De.calcGridItemPosition)(this.getPositionParams(this.props),this.props.x,this.props.y,this.props.w,this.props.h,this.state),o=(0,De.calcGridItemPosition)(this.getPositionParams(e),e.x,e.y,e.w,e.h,n);return!(0,Ct.fastPositionEqual)(r,o)||this.props.useCSSTransforms!==e.useCSSTransforms}componentDidMount(){this.moveDroppingItem({})}componentDidUpdate(e){this.moveDroppingItem(e)}moveDroppingItem(e){const{droppingPosition:n}=this.props;if(!n)return;const r=this.elementRef.current;if(!r)return;const o=e.droppingPosition||{left:0,top:0},{dragging:i}=this.state,s=i&&n.left!==o.left||n.top!==o.top;if(!i)this.onDragStart(n.e,{node:r,deltaX:n.left,deltaY:n.top});else if(s){const c=n.left-i.left,l=n.top-i.top;this.onDrag(n.e,{node:r,deltaX:c,deltaY:l},!0)}}getPositionParams(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props;return{cols:e.cols,containerPadding:e.containerPadding,containerWidth:e.containerWidth,margin:e.margin,maxRows:e.maxRows,rowHeight:e.rowHeight}}createStyle(e){const{usePercentages:n,containerWidth:r,useCSSTransforms:o}=this.props;let i;return o?i=(0,Ct.setTransform)(e):(i=(0,Ct.setTopLeft)(e),n&&(i.left=(0,Ct.perc)(e.left/r),i.width=(0,Ct.perc)(e.width/r))),i}mixinDraggable(e,n){return Pt.default.createElement(Wa.DraggableCore,{disabled:!n,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop,handle:this.props.handle,cancel:".react-resizable-handle"+(this.props.cancel?","+this.props.cancel:""),scale:this.props.transformScale,nodeRef:this.elementRef},e)}curryResizeHandler(e,n){return(r,o)=>n(r,o,e)}mixinResizable(e,n,r){const{cols:o,minW:i,minH:s,maxW:c,maxH:l,transformScale:a,resizeHandles:f,resizeHandle:m}=this.props,y=this.getPositionParams(),g=(0,De.calcGridItemPosition)(y,0,0,o,0).width,q=(0,De.calcGridItemPosition)(y,0,0,i,s),G=(0,De.calcGridItemPosition)(y,0,0,c,l),A=[q.width,q.height],b=[Math.min(G.width,g),Math.min(G.height,1/0)];return Pt.default.createElement(Aa.Resizable,{draggableOpts:{disabled:!r},className:r?void 0:"react-resizable-hide",width:n.width,height:n.height,minConstraints:A,maxConstraints:b,onResizeStop:this.curryResizeHandler(n,this.onResizeStop),onResizeStart:this.curryResizeHandler(n,this.onResizeStart),onResize:this.curryResizeHandler(n,this.onResize),transformScale:a,resizeHandles:f,handle:m},e)}onResizeHandler(e,n,r,o){let{node:i,size:s,handle:c}=n;const l=this.props[o];if(!l)return;const{x:a,y:f,i:m,maxH:y,minH:g,containerWidth:q}=this.props,{minW:G,maxW:A}=this.props;let b=s;i&&(b=(0,Ct.resizeItemInDirection)(c,r,s,q),(0,eo.flushSync)(()=>{this.setState({resizing:o==="onResizeStop"?null:b})}));let{w,h:C}=(0,De.calcWH)(this.getPositionParams(),b.width,b.height,a,f,c);w=(0,De.clamp)(w,Math.max(G,1),A),C=(0,De.clamp)(C,g,y),l.call(this,m,w,C,{e,node:i,size:b,handle:c})}render(){const{x:e,y:n,w:r,h:o,isDraggable:i,isResizable:s,droppingPosition:c,useCSSTransforms:l}=this.props,a=(0,De.calcGridItemPosition)(this.getPositionParams(),e,n,r,o,this.state),f=Pt.default.Children.only(this.props.children);let m=Pt.default.cloneElement(f,{ref:this.elementRef,className:(0,Ba.default)("react-grid-item",f.props.className,this.props.className,{static:this.props.static,resizing:!!this.state.resizing,"react-draggable":i,"react-draggable-dragging":!!this.state.dragging,dropping:!!c,cssTransforms:l}),style:Gn(Gn(Gn({},this.props.style),f.props.style),this.createStyle(a))});return m=this.mixinResizable(m,a,s),m=this.mixinDraggable(m,i),m}}_n.default=Or;Ve(Or,"propTypes",{children:se.default.element,cols:se.default.number.isRequired,containerWidth:se.default.number.isRequired,rowHeight:se.default.number.isRequired,margin:se.default.array.isRequired,maxRows:se.default.number.isRequired,containerPadding:se.default.array.isRequired,x:se.default.number.isRequired,y:se.default.number.isRequired,w:se.default.number.isRequired,h:se.default.number.isRequired,minW:function(t,e){const n=t[e];if(typeof n!="number")return new Error("minWidth not Number");if(n>t.w||n>t.maxW)return new Error("minWidth larger than item width/maxWidth")},maxW:function(t,e){const n=t[e];if(typeof n!="number")return new Error("maxWidth not Number");if(n<t.w||n<t.minW)return new Error("maxWidth smaller than item width/minWidth")},minH:function(t,e){const n=t[e];if(typeof n!="number")return new Error("minHeight not Number");if(n>t.h||n>t.maxH)return new Error("minHeight larger than item height/maxHeight")},maxH:function(t,e){const n=t[e];if(typeof n!="number")return new Error("maxHeight not Number");if(n<t.h||n<t.minH)return new Error("maxHeight smaller than item height/minHeight")},i:se.default.string.isRequired,resizeHandles:to.resizeHandleAxesType,resizeHandle:to.resizeHandleType,onDragStop:se.default.func,onDragStart:se.default.func,onDrag:se.default.func,onResizeStop:se.default.func,onResizeStart:se.default.func,onResize:se.default.func,isDraggable:se.default.bool.isRequired,isResizable:se.default.bool.isRequired,isBounded:se.default.bool.isRequired,static:se.default.bool,useCSSTransforms:se.default.bool.isRequired,transformScale:se.default.number,className:se.default.string,handle:se.default.string,cancel:se.default.string,droppingPosition:se.default.shape({e:se.default.object.isRequired,left:se.default.number.isRequired,top:se.default.number.isRequired})});Ve(Or,"defaultProps",{className:"",cancel:"",handle:"",minH:1,minW:1,maxH:1/0,maxW:1/0,transformScale:1});Object.defineProperty(It,"__esModule",{value:!0});It.default=void 0;var gt=qo(N),Yn=dr,qa=Pr(gn),F=J,Ga=Ke,ro=Pr(_n),Ya=Pr(nt);function Pr(t){return t&&t.__esModule?t:{default:t}}function qo(t,e){if(typeof WeakMap=="function")var n=new WeakMap,r=new WeakMap;return(qo=function(o,i){if(!i&&o&&o.__esModule)return o;var s,c,l={__proto__:null,default:o};if(o===null||typeof o!="object"&&typeof o!="function")return l;if(s=i?r:n){if(s.has(o))return s.get(o);s.set(o,l)}for(const a in o)a!=="default"&&{}.hasOwnProperty.call(o,a)&&((c=(s=Object.defineProperty)&&Object.getOwnPropertyDescriptor(o,a))&&(c.get||c.set)?s(l,a,c):l[a]=o[a]);return l})(t,e)}function oo(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function mt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oo(Object(n),!0).forEach(function(r){Te(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oo(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Te(t,e,n){return(e=Ua(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ua(t){var e=Xa(t,"string");return typeof e=="symbol"?e:e+""}function Xa(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const io="react-grid-layout";let Go=!1;try{Go=/firefox/i.test(navigator.userAgent)}catch{}class On extends gt.Component{constructor(){super(...arguments),Te(this,"state",{activeDrag:null,layout:(0,F.synchronizeLayoutWithChildren)(this.props.layout,this.props.children,this.props.cols,(0,F.compactType)(this.props),this.props.allowOverlap),mounted:!1,oldDragItem:null,oldLayout:null,oldResizeItem:null,resizing:!1,droppingDOMNode:null,children:[]}),Te(this,"dragEnterCounter",0),Te(this,"onDragStart",(e,n,r,o)=>{let{e:i,node:s}=o;const{layout:c}=this.state,l=(0,F.getLayoutItem)(c,e);if(!l)return;const a={w:l.w,h:l.h,x:l.x,y:l.y,placeholder:!0,i:e};return this.setState({oldDragItem:(0,F.cloneLayoutItem)(l),oldLayout:c,activeDrag:a}),this.props.onDragStart(c,l,l,null,i,s)}),Te(this,"onDrag",(e,n,r,o)=>{let{e:i,node:s}=o;const{oldDragItem:c}=this.state;let{layout:l}=this.state;const{cols:a,allowOverlap:f,preventCollision:m}=this.props,y=(0,F.getLayoutItem)(l,e);if(!y)return;const g={w:y.w,h:y.h,x:y.x,y:y.y,placeholder:!0,i:e};l=(0,F.moveElement)(l,y,n,r,!0,m,(0,F.compactType)(this.props),a,f),this.props.onDrag(l,c,y,g,i,s),this.setState({layout:f?l:(0,F.compact)(l,(0,F.compactType)(this.props),a),activeDrag:g})}),Te(this,"onDragStop",(e,n,r,o)=>{let{e:i,node:s}=o;if(!this.state.activeDrag)return;const{oldDragItem:c}=this.state;let{layout:l}=this.state;const{cols:a,preventCollision:f,allowOverlap:m}=this.props,y=(0,F.getLayoutItem)(l,e);if(!y)return;l=(0,F.moveElement)(l,y,n,r,!0,f,(0,F.compactType)(this.props),a,m);const q=m?l:(0,F.compact)(l,(0,F.compactType)(this.props),a);this.props.onDragStop(q,c,y,null,i,s);const{oldLayout:G}=this.state;this.setState({activeDrag:null,layout:q,oldDragItem:null,oldLayout:null}),this.onLayoutMaybeChanged(q,G)}),Te(this,"onResizeStart",(e,n,r,o)=>{let{e:i,node:s}=o;const{layout:c}=this.state,l=(0,F.getLayoutItem)(c,e);l&&(this.setState({oldResizeItem:(0,F.cloneLayoutItem)(l),oldLayout:this.state.layout,resizing:!0}),this.props.onResizeStart(c,l,l,null,i,s))}),Te(this,"onResize",(e,n,r,o)=>{let{e:i,node:s,size:c,handle:l}=o;const{oldResizeItem:a}=this.state,{layout:f}=this.state,{cols:m,preventCollision:y,allowOverlap:g}=this.props;let q=!1,G,A,b;const[w,C]=(0,F.withLayoutItem)(f,e,x=>{let $;return A=x.x,b=x.y,["sw","w","nw","n","ne"].indexOf(l)!==-1&&(["sw","nw","w"].indexOf(l)!==-1&&(A=x.x+(x.w-n),n=x.x!==A&&A<0?x.w:n,A=A<0?0:A),["ne","n","nw"].indexOf(l)!==-1&&(b=x.y+(x.h-r),r=x.y!==b&&b<0?x.h:r,b=b<0?0:b),q=!0),y&&!g&&($=(0,F.getAllCollisions)(f,mt(mt({},x),{},{w:n,h:r,x:A,y:b})).filter(ye=>ye.i!==x.i).length>0,$&&(b=x.y,r=x.h,A=x.x,n=x.w,q=!1)),x.w=n,x.h=r,x});if(!C)return;G=w,q&&(G=(0,F.moveElement)(w,C,A,b,!0,this.props.preventCollision,(0,F.compactType)(this.props),m,g));const k={w:C.w,h:C.h,x:C.x,y:C.y,static:!0,i:e};this.props.onResize(G,a,C,k,i,s),this.setState({layout:g?G:(0,F.compact)(G,(0,F.compactType)(this.props),m),activeDrag:k})}),Te(this,"onResizeStop",(e,n,r,o)=>{let{e:i,node:s}=o;const{layout:c,oldResizeItem:l}=this.state,{cols:a,allowOverlap:f}=this.props,m=(0,F.getLayoutItem)(c,e),y=f?c:(0,F.compact)(c,(0,F.compactType)(this.props),a);this.props.onResizeStop(y,l,m,null,i,s);const{oldLayout:g}=this.state;this.setState({activeDrag:null,layout:y,oldResizeItem:null,oldLayout:null,resizing:!1}),this.onLayoutMaybeChanged(y,g)}),Te(this,"onDragOver",e=>{var n;if(e.preventDefault(),e.stopPropagation(),Go&&!((n=e.nativeEvent.target)!==null&&n!==void 0&&n.classList.contains(io)))return!1;const{droppingItem:r,onDropDragOver:o,margin:i,cols:s,rowHeight:c,maxRows:l,width:a,containerPadding:f,transformScale:m}=this.props,y=o?.(e);if(y===!1)return this.state.droppingDOMNode&&this.removeDroppingPlaceholder(),!1;const g=mt(mt({},r),y),{layout:q}=this.state,G=e.currentTarget.getBoundingClientRect(),A=e.clientX-G.left,b=e.clientY-G.top,w={left:A/m,top:b/m,e};if(this.state.droppingDOMNode){if(this.state.droppingPosition){const{left:C,top:k}=this.state.droppingPosition;(C!=A||k!=b)&&this.setState({droppingPosition:w})}}else{const C={cols:s,margin:i,maxRows:l,rowHeight:c,containerWidth:a,containerPadding:f||i},k=(0,Ga.calcXY)(C,b,A,g.w,g.h);this.setState({droppingDOMNode:gt.createElement("div",{key:g.i}),droppingPosition:w,layout:[...q,mt(mt({},g),{},{x:k.x,y:k.y,static:!1,isDraggable:!0})]})}}),Te(this,"removeDroppingPlaceholder",()=>{const{droppingItem:e,cols:n}=this.props,{layout:r}=this.state,o=(0,F.compact)(r.filter(i=>i.i!==e.i),(0,F.compactType)(this.props),n,this.props.allowOverlap);this.setState({layout:o,droppingDOMNode:null,activeDrag:null,droppingPosition:void 0})}),Te(this,"onDragLeave",e=>{e.preventDefault(),e.stopPropagation(),this.dragEnterCounter--,this.dragEnterCounter===0&&this.removeDroppingPlaceholder()}),Te(this,"onDragEnter",e=>{e.preventDefault(),e.stopPropagation(),this.dragEnterCounter++}),Te(this,"onDrop",e=>{e.preventDefault(),e.stopPropagation();const{droppingItem:n}=this.props,{layout:r}=this.state,o=r.find(i=>i.i===n.i);this.dragEnterCounter=0,this.removeDroppingPlaceholder(),this.props.onDrop(r,o,e)})}componentDidMount(){this.setState({mounted:!0}),this.onLayoutMaybeChanged(this.state.layout,this.props.layout)}static getDerivedStateFromProps(e,n){let r;return n.activeDrag?null:(!(0,Yn.deepEqual)(e.layout,n.propsLayout)||e.compactType!==n.compactType?r=e.layout:(0,F.childrenEqual)(e.children,n.children)||(r=n.layout),r?{layout:(0,F.synchronizeLayoutWithChildren)(r,e.children,e.cols,(0,F.compactType)(e),e.allowOverlap),compactType:e.compactType,children:e.children,propsLayout:e.layout}:null)}shouldComponentUpdate(e,n){return this.props.children!==e.children||!(0,F.fastRGLPropsEqual)(this.props,e,Yn.deepEqual)||this.state.activeDrag!==n.activeDrag||this.state.mounted!==n.mounted||this.state.droppingPosition!==n.droppingPosition}componentDidUpdate(e,n){if(!this.state.activeDrag){const r=this.state.layout,o=n.layout;this.onLayoutMaybeChanged(r,o)}}containerHeight(){if(!this.props.autoSize)return;const e=(0,F.bottom)(this.state.layout),n=this.props.containerPadding?this.props.containerPadding[1]:this.props.margin[1];return e*this.props.rowHeight+(e-1)*this.props.margin[1]+n*2+"px"}onLayoutMaybeChanged(e,n){n||(n=this.state.layout),(0,Yn.deepEqual)(n,e)||this.props.onLayoutChange(e)}placeholder(){const{activeDrag:e}=this.state;if(!e)return null;const{width:n,cols:r,margin:o,containerPadding:i,rowHeight:s,maxRows:c,useCSSTransforms:l,transformScale:a}=this.props;return gt.createElement(ro.default,{w:e.w,h:e.h,x:e.x,y:e.y,i:e.i,className:"react-grid-placeholder ".concat(this.state.resizing?"placeholder-resizing":""),containerWidth:n,cols:r,margin:o,containerPadding:i||o,maxRows:c,rowHeight:s,isDraggable:!1,isResizable:!1,isBounded:!1,useCSSTransforms:l,transformScale:a},gt.createElement("div",null))}processGridItem(e,n){if(!e||!e.key)return;const r=(0,F.getLayoutItem)(this.state.layout,String(e.key));if(!r)return null;const{width:o,cols:i,margin:s,containerPadding:c,rowHeight:l,maxRows:a,isDraggable:f,isResizable:m,isBounded:y,useCSSTransforms:g,transformScale:q,draggableCancel:G,draggableHandle:A,resizeHandles:b,resizeHandle:w}=this.props,{mounted:C,droppingPosition:k}=this.state,x=typeof r.isDraggable=="boolean"?r.isDraggable:!r.static&&f,$=typeof r.isResizable=="boolean"?r.isResizable:!r.static&&m,he=r.resizeHandles||b,ye=x&&y&&r.isBounded!==!1;return gt.createElement(ro.default,{containerWidth:o,cols:i,margin:s,containerPadding:c||s,maxRows:a,rowHeight:l,cancel:G,handle:A,onDragStop:this.onDragStop,onDragStart:this.onDragStart,onDrag:this.onDrag,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,isDraggable:x,isResizable:$,isBounded:ye,useCSSTransforms:g&&C,usePercentages:!C,transformScale:q,w:r.w,h:r.h,x:r.x,y:r.y,i:r.i,minH:r.minH,minW:r.minW,maxH:r.maxH,maxW:r.maxW,static:r.static,droppingPosition:n?k:void 0,resizeHandles:he,resizeHandle:w},e)}render(){const{className:e,style:n,isDroppable:r,innerRef:o}=this.props,i=(0,qa.default)(io,e),s=mt({height:this.containerHeight()},n);return gt.createElement("div",{ref:o,className:i,style:s,onDrop:r?this.onDrop:F.noop,onDragLeave:r?this.onDragLeave:F.noop,onDragEnter:r?this.onDragEnter:F.noop,onDragOver:r?this.onDragOver:F.noop},gt.Children.map(this.props.children,c=>this.processGridItem(c)),r&&this.state.droppingDOMNode&&this.processGridItem(this.state.droppingDOMNode,!0),this.placeholder())}}It.default=On;Te(On,"displayName","ReactGridLayout");Te(On,"propTypes",Ya.default);Te(On,"defaultProps",{autoSize:!0,cols:12,className:"",style:{},draggableHandle:"",draggableCancel:"",containerPadding:null,rowHeight:150,maxRows:1/0,layout:[],margin:[10,10],isBounded:!1,isDraggable:!0,isResizable:!0,allowOverlap:!1,isDroppable:!1,useCSSTransforms:!0,transformScale:1,verticalCompact:!0,compactType:"vertical",preventCollision:!1,droppingItem:{i:"__dropping-elem__",h:1,w:1},resizeHandles:["se"],onLayoutChange:F.noop,onDragStart:F.noop,onDrag:F.noop,onDragStop:F.noop,onResizeStart:F.noop,onResize:F.noop,onResizeStop:F.noop,onDrop:F.noop,onDropDragOver:F.noop});var Pn={},St={};Object.defineProperty(St,"__esModule",{value:!0});St.findOrGenerateResponsiveLayout=Ja;St.getBreakpointFromWidth=Va;St.getColsFromBreakpoint=Ka;St.sortBreakpoints=Cr;var on=J;function Va(t,e){const n=Cr(t);let r=n[0];for(let o=1,i=n.length;o<i;o++){const s=n[o];e>t[s]&&(r=s)}return r}function Ka(t,e){if(!e[t])throw new Error("ResponsiveReactGridLayout: `cols` entry for breakpoint "+t+" is missing!");return e[t]}function Ja(t,e,n,r,o,i){if(t[n])return(0,on.cloneLayout)(t[n]);let s=t[r];const c=Cr(e),l=c.slice(c.indexOf(n));for(let a=0,f=l.length;a<f;a++){const m=l[a];if(t[m]){s=t[m];break}}return s=(0,on.cloneLayout)(s||[]),(0,on.compact)((0,on.correctBounds)(s,{cols:o}),i,o)}function Cr(t){return Object.keys(t).sort(function(n,r){return t[n]-t[r]})}Object.defineProperty(Pn,"__esModule",{value:!0});Pn.default=void 0;var so=Uo(N),Ae=Yo(ct),Un=dr,Tt=J,yt=St,Qa=Yo(It);const Za=["breakpoint","breakpoints","cols","layouts","margin","containerPadding","onBreakpointChange","onLayoutChange","onWidthChange"];function Yo(t){return t&&t.__esModule?t:{default:t}}function Uo(t,e){if(typeof WeakMap=="function")var n=new WeakMap,r=new WeakMap;return(Uo=function(o,i){if(!i&&o&&o.__esModule)return o;var s,c,l={__proto__:null,default:o};if(o===null||typeof o!="object"&&typeof o!="function")return l;if(s=i?r:n){if(s.has(o))return s.get(o);s.set(o,l)}for(const a in o)a!=="default"&&{}.hasOwnProperty.call(o,a)&&((c=(s=Object.defineProperty)&&Object.getOwnPropertyDescriptor(o,a))&&(c.get||c.set)?s(l,a,c):l[a]=o[a]);return l})(t,e)}function ar(){return ar=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ar.apply(null,arguments)}function el(t,e){if(t==null)return{};var n,r,o=tl(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function tl(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function ao(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function Xn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ao(Object(n),!0).forEach(function(r){Bt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ao(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Bt(t,e,n){return(e=nl(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nl(t){var e=rl(t,"string");return typeof e=="symbol"?e:e+""}function rl(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const lo=t=>Object.prototype.toString.call(t);function sn(t,e){return t==null?null:Array.isArray(t)?t:t[e]}class Mr extends so.Component{constructor(){super(...arguments),Bt(this,"state",this.generateInitialState()),Bt(this,"onLayoutChange",e=>{this.props.onLayoutChange(e,Xn(Xn({},this.props.layouts),{},{[this.state.breakpoint]:e}))})}generateInitialState(){const{width:e,breakpoints:n,layouts:r,cols:o}=this.props,i=(0,yt.getBreakpointFromWidth)(n,e),s=(0,yt.getColsFromBreakpoint)(i,o),c=this.props.verticalCompact===!1?null:this.props.compactType;return{layout:(0,yt.findOrGenerateResponsiveLayout)(r,n,i,i,s,c),breakpoint:i,cols:s}}static getDerivedStateFromProps(e,n){if(!(0,Un.deepEqual)(e.layouts,n.layouts)){const{breakpoint:r,cols:o}=n;return{layout:(0,yt.findOrGenerateResponsiveLayout)(e.layouts,e.breakpoints,r,r,o,e.compactType),layouts:e.layouts}}return null}componentDidUpdate(e){(this.props.width!=e.width||this.props.breakpoint!==e.breakpoint||!(0,Un.deepEqual)(this.props.breakpoints,e.breakpoints)||!(0,Un.deepEqual)(this.props.cols,e.cols))&&this.onWidthChange(e)}onWidthChange(e){const{breakpoints:n,cols:r,layouts:o,compactType:i}=this.props,s=this.props.breakpoint||(0,yt.getBreakpointFromWidth)(this.props.breakpoints,this.props.width),c=this.state.breakpoint,l=(0,yt.getColsFromBreakpoint)(s,r),a=Xn({},o);if(c!==s||e.breakpoints!==n||e.cols!==r){c in a||(a[c]=(0,Tt.cloneLayout)(this.state.layout));let y=(0,yt.findOrGenerateResponsiveLayout)(a,n,s,c,l,i);y=(0,Tt.synchronizeLayoutWithChildren)(y,this.props.children,l,i,this.props.allowOverlap),a[s]=y,this.props.onBreakpointChange(s,l),this.props.onLayoutChange(y,a),this.setState({breakpoint:s,layout:y,cols:l})}const f=sn(this.props.margin,s),m=sn(this.props.containerPadding,s);this.props.onWidthChange(this.props.width,f,l,m)}render(){const e=this.props,{breakpoint:n,breakpoints:r,cols:o,layouts:i,margin:s,containerPadding:c,onBreakpointChange:l,onLayoutChange:a,onWidthChange:f}=e,m=el(e,Za);return so.createElement(Qa.default,ar({},m,{margin:sn(s,this.state.breakpoint),containerPadding:sn(c,this.state.breakpoint),onLayoutChange:this.onLayoutChange,layout:this.state.layout,cols:this.state.cols}))}}Pn.default=Mr;Bt(Mr,"propTypes",{breakpoint:Ae.default.string,breakpoints:Ae.default.object,allowOverlap:Ae.default.bool,cols:Ae.default.object,margin:Ae.default.oneOfType([Ae.default.array,Ae.default.object]),containerPadding:Ae.default.oneOfType([Ae.default.array,Ae.default.object]),layouts(t,e){if(lo(t[e])!=="[object Object]")throw new Error("Layout property must be an object. Received: "+lo(t[e]));Object.keys(t[e]).forEach(n=>{if(!(n in t.breakpoints))throw new Error("Each key in layouts must align with a key in breakpoints.");(0,Tt.validateLayout)(t.layouts[n],"layouts."+n)})},width:Ae.default.number.isRequired,onBreakpointChange:Ae.default.func,onLayoutChange:Ae.default.func,onWidthChange:Ae.default.func});Bt(Mr,"defaultProps",{breakpoints:{lg:1200,md:996,sm:768,xs:480,xxs:0},cols:{lg:12,md:10,sm:6,xs:4,xxs:2},containerPadding:{lg:null,md:null,sm:null,xs:null,xxs:null},layouts:{},margin:[10,10],allowOverlap:!1,onBreakpointChange:Tt.noop,onLayoutChange:Tt.noop,onWidthChange:Tt.noop});var Dr={},Xo=function(){if(typeof Map<"u")return Map;function t(e,n){var r=-1;return e.some(function(o,i){return o[0]===n?(r=i,!0):!1}),r}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(n){var r=t(this.__entries__,n),o=this.__entries__[r];return o&&o[1]},e.prototype.set=function(n,r){var o=t(this.__entries__,n);~o?this.__entries__[o][1]=r:this.__entries__.push([n,r])},e.prototype.delete=function(n){var r=this.__entries__,o=t(r,n);~o&&r.splice(o,1)},e.prototype.has=function(n){return!!~t(this.__entries__,n)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(n,r){r===void 0&&(r=null);for(var o=0,i=this.__entries__;o<i.length;o++){var s=i[o];n.call(r,s[1],s[0])}},e}()}(),lr=typeof window<"u"&&typeof document<"u"&&window.document===document,pn=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),ol=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(pn):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)}}(),il=2;function sl(t,e){var n=!1,r=!1,o=0;function i(){n&&(n=!1,t()),r&&c()}function s(){ol(i)}function c(){var l=Date.now();if(n){if(l-o<il)return;r=!0}else n=!0,r=!1,setTimeout(s,e);o=l}return c}var al=20,ll=["top","right","bottom","left","width","height","size","weight"],cl=typeof MutationObserver<"u",ul=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=sl(this.refresh.bind(this),al)}return t.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},t.prototype.removeObserver=function(e){var n=this.observers_,r=n.indexOf(e);~r&&n.splice(r,1),!n.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},t.prototype.updateObservers_=function(){var e=this.observers_.filter(function(n){return n.gatherActive(),n.hasActive()});return e.forEach(function(n){return n.broadcastActive()}),e.length>0},t.prototype.connect_=function(){!lr||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),cl?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){!lr||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(e){var n=e.propertyName,r=n===void 0?"":n,o=ll.some(function(i){return!!~r.indexOf(i)});o&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),Vo=function(t,e){for(var n=0,r=Object.keys(e);n<r.length;n++){var o=r[n];Object.defineProperty(t,o,{value:e[o],enumerable:!1,writable:!1,configurable:!0})}return t},zt=function(t){var e=t&&t.ownerDocument&&t.ownerDocument.defaultView;return e||pn},Ko=Cn(0,0,0,0);function hn(t){return parseFloat(t)||0}function co(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce(function(r,o){var i=t["border-"+o+"-width"];return r+hn(i)},0)}function dl(t){for(var e=["top","right","bottom","left"],n={},r=0,o=e;r<o.length;r++){var i=o[r],s=t["padding-"+i];n[i]=hn(s)}return n}function fl(t){var e=t.getBBox();return Cn(0,0,e.width,e.height)}function pl(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return Ko;var r=zt(t).getComputedStyle(t),o=dl(r),i=o.left+o.right,s=o.top+o.bottom,c=hn(r.width),l=hn(r.height);if(r.boxSizing==="border-box"&&(Math.round(c+i)!==e&&(c-=co(r,"left","right")+i),Math.round(l+s)!==n&&(l-=co(r,"top","bottom")+s)),!gl(t)){var a=Math.round(c+i)-e,f=Math.round(l+s)-n;Math.abs(a)!==1&&(c-=a),Math.abs(f)!==1&&(l-=f)}return Cn(o.left,o.top,c,l)}var hl=function(){return typeof SVGGraphicsElement<"u"?function(t){return t instanceof zt(t).SVGGraphicsElement}:function(t){return t instanceof zt(t).SVGElement&&typeof t.getBBox=="function"}}();function gl(t){return t===zt(t).document.documentElement}function ml(t){return lr?hl(t)?fl(t):pl(t):Ko}function yl(t){var e=t.x,n=t.y,r=t.width,o=t.height,i=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,s=Object.create(i.prototype);return Vo(s,{x:e,y:n,width:r,height:o,top:n,right:e+r,bottom:o+n,left:e}),s}function Cn(t,e,n,r){return{x:t,y:e,width:n,height:r}}var vl=function(){function t(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Cn(0,0,0,0),this.target=e}return t.prototype.isActive=function(){var e=ml(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},t}(),_l=function(){function t(e,n){var r=yl(n);Vo(this,{target:e,contentRect:r})}return t}(),bl=function(){function t(e,n,r){if(this.activeObservations_=[],this.observations_=new Xo,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=n,this.callbackCtx_=r}return t.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof zt(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(e)||(n.set(e,new vl(e)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof zt(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(e)&&(n.delete(e),n.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(n){n.isActive()&&e.activeObservations_.push(n)})},t.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,n=this.activeObservations_.map(function(r){return new _l(r.target,r.broadcastRect())});this.callback_.call(e,n,e),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),Jo=typeof WeakMap<"u"?new WeakMap:new Xo,Qo=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=ul.getInstance(),r=new bl(e,n,this);Jo.set(this,r)}return t}();["observe","unobserve","disconnect"].forEach(function(t){Qo.prototype[t]=function(){var e;return(e=Jo.get(this))[t].apply(e,arguments)}});var wl=function(){return typeof pn.ResizeObserver<"u"?pn.ResizeObserver:Qo}();const Sl=Object.freeze(Object.defineProperty({__proto__:null,default:wl},Symbol.toStringTag,{value:"Module"})),xl=xi(Sl);Object.defineProperty(Dr,"__esModule",{value:!0});Dr.default=Nl;var an=Zo(N),El=Tr(ct),Rl=Tr(xl),Ol=Tr(gn);const Pl=["measureBeforeMount"];function Tr(t){return t&&t.__esModule?t:{default:t}}function Zo(t,e){if(typeof WeakMap=="function")var n=new WeakMap,r=new WeakMap;return(Zo=function(o,i){if(!i&&o&&o.__esModule)return o;var s,c,l={__proto__:null,default:o};if(o===null||typeof o!="object"&&typeof o!="function")return l;if(s=i?r:n){if(s.has(o))return s.get(o);s.set(o,l)}for(const a in o)a!=="default"&&{}.hasOwnProperty.call(o,a)&&((c=(s=Object.defineProperty)&&Object.getOwnPropertyDescriptor(o,a))&&(c.get||c.set)?s(l,a,c):l[a]=o[a]);return l})(t,e)}function cr(){return cr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cr.apply(null,arguments)}function Cl(t,e){if(t==null)return{};var n,r,o=Ml(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function Ml(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Mt(t,e,n){return(e=Dl(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dl(t){var e=Tl(t,"string");return typeof e=="symbol"?e:e+""}function Tl(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const zl="react-grid-layout";function Nl(t){var e;return e=class extends an.Component{constructor(){super(...arguments),Mt(this,"state",{width:1280}),Mt(this,"elementRef",an.createRef()),Mt(this,"mounted",!1),Mt(this,"resizeObserver",void 0)}componentDidMount(){this.mounted=!0,this.resizeObserver=new Rl.default(o=>{if(this.elementRef.current instanceof HTMLElement){const s=o[0].contentRect.width;this.setState({width:s})}});const r=this.elementRef.current;r instanceof HTMLElement&&this.resizeObserver.observe(r)}componentWillUnmount(){this.mounted=!1;const r=this.elementRef.current;r instanceof HTMLElement&&this.resizeObserver.unobserve(r),this.resizeObserver.disconnect()}render(){const r=this.props,{measureBeforeMount:o}=r,i=Cl(r,Pl);return o&&!this.mounted?an.createElement("div",{className:(0,Ol.default)(this.props.className,zl),style:this.props.style,ref:this.elementRef}):an.createElement(t,cr({innerRef:this.elementRef},i,this.state))}},Mt(e,"defaultProps",{measureBeforeMount:!1}),Mt(e,"propTypes",{measureBeforeMount:El.default.bool}),e}(function(t){t.exports=It.default,t.exports.utils=J,t.exports.calculateUtils=Ke,t.exports.Responsive=Pn.default,t.exports.Responsive.utils=St,t.exports.WidthProvider=Dr.default})(po);var ei=po.exports;const kl=Ei(ei);function jl(t,e){return t(`SELECT id, title, date, start_time, end_time, group_id, role_id, description
     FROM department_event
     WHERE date = ?
     ORDER BY start_time`,[e]).map(r=>({id:Number(r.id),title:String(r.title),date:String(r.date),start_time:String(r.start_time),end_time:String(r.end_time),group_id:r.group_id!=null?Number(r.group_id):null,role_id:r.role_id!=null?Number(r.role_id):null,description:r.description!=null?String(r.description):null}))}function ln(t){const[e,n]=t.split(":").map(Number);return e*60+n}function cn(t){const e=Math.floor(t/60),n=t%60;return`${e.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`}function Hl(t,e,n,r){return t<r&&n<e}function Ll(t,e){if(e.length===0)return t.map(r=>({id:r.id,name:r.name,original_start:r.start_time,original_end:r.end_time,adjusted_start:r.start_time,adjusted_end:r.end_time,ordering:r.ordering,is_split:!1,blocked:!1}));const n=[];for(const r of t){let o=ln(r.start_time),i=ln(r.end_time);const s=r.start_time,c=r.end_time;let l=[{start:o,end:i}];for(const a of e){const f=ln(a.start_time),m=ln(a.end_time),y=[];for(const g of l)Hl(g.start,g.end,f,m)?(g.start<f&&y.push({start:g.start,end:f}),g.end>m&&y.push({start:m,end:g.end})):y.push(g);l=y}if(l.length===0)n.push({id:r.id,name:r.name,original_start:s,original_end:c,adjusted_start:s,adjusted_end:c,ordering:r.ordering,is_split:!1,blocked:!0});else if(l.length===1){const a=l[0];n.push({id:r.id,name:r.name,original_start:s,original_end:c,adjusted_start:cn(a.start),adjusted_end:cn(a.end),ordering:r.ordering,is_split:!1,blocked:!1})}else{l.sort((a,f)=>a.start-f.start);for(let a=0;a<l.length;a++){const f=l[a];n.push({id:r.id,name:r.name,original_start:s,original_end:c,adjusted_start:cn(f.start),adjusted_end:cn(f.end),ordering:r.ordering+a*.1,is_split:!0,split_part:a===0?"before":"after",blocked:!1})}}}return n.sort((r,o)=>r.ordering-o.ordering),n}function $t(t){const[e,n]=t.split(":").map(Number),r=e>=12?"PM":"AM";return`${e%12||12}:${n.toString().padStart(2,"0")} ${r}`}const $l=ei.WidthProvider(kl),Wl=$l,Al={Purple:{bg:h.colorPalettePurpleBackground2,fg:h.colorPalettePurpleForeground2},Pink:{bg:h.colorPalettePinkBackground2,fg:h.colorPalettePinkForeground2},DarkPink:{bg:h.colorPaletteMagentaBackground2,fg:h.colorPaletteMagentaForeground2},DarkYellow:{bg:h.colorPaletteGoldBackground2,fg:h.colorPaletteGoldForeground2},Green:{bg:h.colorPaletteGreenBackground2,fg:h.colorPaletteGreenForeground2},DarkPurple:{bg:h.colorPaletteGrapeBackground2,fg:h.colorPaletteGrapeForeground2},DarkGreen:{bg:h.colorPaletteDarkGreenBackground2,fg:h.colorPaletteDarkGreenForeground2},DarkBlue:{bg:h.colorPaletteNavyBackground2,fg:h.colorPaletteNavyForeground2}},uo=t=>{if(!t)return{bg:void 0,fg:void 0};const e=t.replace(/^\d+\.\s*/,"");return Al[e]||{bg:void 0,fg:void 0}},Bl=Oi({root:{padding:h.spacingHorizontalL,backgroundColor:h.colorNeutralBackground2,minHeight:"100%"},header:{display:"flex",flexDirection:"column",alignItems:"stretch",gap:h.spacingVerticalM,marginBottom:h.spacingHorizontalL,"@media (min-width: 1024px)":{flexDirection:"row",alignItems:"center",gap:h.spacingHorizontalM}},headerLeft:{display:"flex",alignItems:"center",gap:h.spacingHorizontalS,flexShrink:0},headerCenter:{display:"flex",alignItems:"center",flex:1,justifyContent:"center","@media (max-width: 1023px)":{justifyContent:"flex-start"}},headerRight:{display:"flex",flexWrap:"wrap",gap:h.spacingHorizontalS,alignItems:"center","@media (min-width: 1024px)":{marginLeft:"auto"}},label:{fontSize:h.fontSizeBase300,color:h.colorNeutralForeground2,whiteSpace:"nowrap"},groupCard:{height:"100%",display:"flex",flexDirection:"column",boxShadow:h.shadow2,overflow:"visible",borderRadius:h.borderRadiusLarge},groupHeader:{display:"flex",alignItems:"center",justifyContent:"space-between",paddingBottom:h.spacingVerticalS},rolesGrid:{flex:1,display:"grid",gap:h.spacingHorizontalXS,paddingTop:h.spacingVerticalS,paddingLeft:h.spacingHorizontalS,paddingRight:h.spacingHorizontalS,paddingBottom:h.spacingHorizontalS,overflow:"auto",minHeight:0,"@media (max-width: 767px)":{gap:h.spacingHorizontalXXS,paddingLeft:h.spacingHorizontalXS,paddingRight:h.spacingHorizontalXS}},roleCard:{borderLeftWidth:"4px",borderLeftStyle:"solid",padding:`${h.spacingVerticalS} ${h.spacingHorizontalM}`,backgroundColor:h.colorNeutralBackground1,borderRadius:h.borderRadiusMedium,display:"flex",flexDirection:"column",minHeight:0,height:"100%",overflowY:"auto",overflowX:"hidden","@media (max-width: 767px)":{padding:`${h.spacingVerticalXS} ${h.spacingHorizontalS}`}},roleHeader:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:h.spacingVerticalXS,flexShrink:0},roleName:{fontSize:h.fontSizeBase300,fontWeight:h.fontWeightSemibold},roleCount:{fontSize:h.fontSizeBase200,color:h.colorNeutralForeground3,fontWeight:h.fontWeightMedium},assignmentsList:{listStyleType:"none",padding:0,margin:0,overflow:"auto",display:"flex",flexDirection:"column",gap:h.spacingVerticalXS,flex:1,minHeight:0},assignmentItem:{display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:h.colorNeutralBackground3,borderRadius:h.borderRadiusSmall,padding:`${h.spacingVerticalXS} ${h.spacingHorizontalS}`,columnGap:h.spacingHorizontalS,flexShrink:0,width:"100%",fontSize:h.fontSizeBase200,transition:`background-color ${h.durationFast} ${h.curveEasyEase}`,":hover":{backgroundColor:h.colorNeutralBackground3Hover}},assignmentName:{flex:1,overflowWrap:"anywhere",wordBreak:"break-word"},actionsRow:{display:"flex",columnGap:h.spacingHorizontalS,flexShrink:0},movedBadge:{backgroundColor:h.colorPaletteYellowBackground2,color:h.colorPaletteYellowForeground2,fontSize:h.fontSizeBase100,padding:`0 ${h.spacingHorizontalXS}`,borderRadius:h.borderRadiusSmall,marginLeft:h.spacingHorizontalXS}});function Il({date:t,segment:e,all:n,allRoles:r,loadMonthlyDefaultsForMonth:o,weekStartMode:i}){const s=Jn.useMemo(()=>{const l=n(`SELECT a.*, p.first_name, p.last_name 
       FROM assignment a 
       JOIN person p ON p.id = a.person_id 
       WHERE a.date = ? AND a.segment = ?`,[t,e]),a=new Date(t+"T00:00:00"),f=Vn(a,i),{defaults:m,overrides:y,weekOverrides:g}=o(f),q=a.getDay(),G=Kn(a,i),A=w=>{const C=y.find($=>$.person_id===w&&$.segment===e&&$.weekday===q);if(C)return C.role_id;const k=g.find($=>$.person_id===w&&$.segment===e&&$.week_number===G);if(k)return k.role_id;const x=m.find($=>$.person_id===w&&$.segment===e);return x?x.role_id:null},b=[];for(const w of l){const C=A(w.person_id);C!==null&&C!==w.role_id&&b.push({...w,from_role_id:C,to_role_id:w.role_id})}return b},[n,t,e,o,i]),c=l=>{const a=r.find(f=>f.id===l);return a?a.name:"Unknown"};return s.length===0?d.jsx(un,{children:"No moves for this segment."}):d.jsxs(Fi,{size:"small",children:[d.jsx(qi,{children:d.jsxs(qr,{children:[d.jsx($n,{children:"Person"}),d.jsx($n,{children:"Default Role"}),d.jsx($n,{children:"Current Role"})]})}),d.jsx(Gi,{children:s.map(l=>d.jsxs(qr,{children:[d.jsxs(Wn,{children:[l.first_name," ",l.last_name]}),d.jsx(Wn,{children:c(l.from_role_id)}),d.jsx(Wn,{children:c(l.to_role_id)})]},l.id))})]})}function Xl({activeRunSegment:t,setActiveRunSegment:e,groups:n,segments:r,lockEmail:o,sqlDb:i,all:s,roleListForSegment:c,selectedDate:l,selectedDateObj:a,setSelectedDate:f,fmtDateMDY:m,parseYMD:y,ymd:g,setShowNeedsEditor:q,canEdit:G,peopleOptionsForSegment:A,getTimeOffOverlapInfo:b,getRequiredFor:w,addAssignment:C,deleteAssignment:k,segmentAdjustments:x,loadMonthlyDefaultsForMonth:$,people:he,allRoles:ye,availabilityFor:ze,isSegmentBlockedByTimeOff:He,timeOffThreshold:rt,weekdayName:ut,refreshCaches:ot,setStatus:dt,run:xt}){const[Ze,Et]=N.useState(window.innerWidth<1024),le=Ri();N.useEffect(()=>{const u=()=>{Et(window.innerWidth<1024)};return window.addEventListener("resize",u),()=>window.removeEventListener("resize",u)},[]);const Ee=Bl(),v=t,[Mn,Gt]=N.useState([]),[Dn,Yt]=N.useState(!1),[Be,Nt]=N.useState(null),[E,B]=N.useState(null),[ae,ee]=N.useState(!1),[te,pe]=N.useState([]),[_e,Ne]=N.useState(!1),[de,Ge]=N.useState(!1),[ce,fe]=N.useState(!1),[Ie,Ut]=N.useState(""),ft=N.useMemo(()=>{try{const u=s("SELECT value FROM meta WHERE key='week_start_mode'");if(u.length>0){const p=u[0].value;if(p==="first_monday"||p==="first_day")return p}}catch(u){console.error("Failed to load week_start_mode:",u)}return"first_monday"},[s]),Ye=N.useMemo(()=>{if(!Be||E==null)return"";const u=Be.targets.find(M=>M.role.id===E);if(!u)return"";const p=u.need>0?` (need ${u.need})`:"",_=u.trained?"":" (Untrained)";return`${u.group.name} - ${u.role.name}${p}${_}`},[Be,E]),We=N.useMemo(()=>c(v),[c,v]);N.useEffect(()=>{Yt(!1);const u=o&&o!=="Unknown"?`layout:${v}:${o}`:`layout:${v}:default`;let p=[];try{const P=s("SELECT value FROM meta WHERE key=?",[u]);P[0]&&P[0].value&&(p=JSON.parse(String(P[0].value)))}catch{}const _=new Map(p.map(P=>[P.i,P])),M=n.map((P,z)=>{const I=We.filter(re=>re.group_id===P.id),U=I.length,H=Math.max(2,Math.ceil(U/3))+1,ie=I.reduce((re,R)=>{const Y=w(a,P.id,R.id,v);return re+Math.max(0,Y-1)},0),j=Math.ceil(ie/3),W=H+j;return _.get(String(P.id))||{i:String(P.id),x:z%4*3,y:Math.floor(z/4)*W,w:3,h:W}});Gt(M),Yt(!0)},[n,o,v,We,s,w,a]);function ti(u){if(Gt(u),!Dn||!o||o==="Unknown")return;const p=`layout:${v}:${o}`;try{const _=i.prepare("INSERT OR REPLACE INTO meta (key,value) VALUES (?,?)");_.bind([p,JSON.stringify(u)]),_.step(),_.free()}catch{}}const pt=N.useMemo(()=>i?jl(s,g(a)):[],[s,g,a]),ni=N.useMemo(()=>{if(!i||pt.length===0)return new Map;const u=new Map;for(const p of pt){const _=s(`SELECT a.id, a.person_id, p.first_name, p.last_name 
         FROM assignment a 
         JOIN person p ON p.id = a.person_id 
         WHERE a.date = ? AND a.segment = ?
         ORDER BY p.last_name, p.first_name`,[g(a),p.title]);u.set(p.title,_)}return u},[s,g,a,pt,i]),zr=N.useMemo(()=>Ll(r,pt),[r,pt]),kt=N.useMemo(()=>{const u=s("SELECT role_id, COUNT(*) as c FROM assignment WHERE date=? AND segment=? GROUP BY role_id",[g(a),v]);return new Map(u.map(p=>[p.role_id,p.c]))},[s,a,v,g]);N.useMemo(()=>new Set(s("SELECT person_id FROM assignment WHERE date=? AND segment=?",[g(a),v]).map(u=>u.person_id)),[s,a,v,g]);const ri=N.useMemo(()=>{const u=g(a),p=Vn(a,ft),{defaults:_,overrides:M,weekOverrides:P}=$(p),z=a.getDay(),I=Kn(a,ft),U=j=>{const W=M.find(Y=>Y.person_id===j&&Y.segment===v&&Y.weekday===z);if(W)return W.role_id;const re=P.find(Y=>Y.person_id===j&&Y.segment===v&&Y.week_number===I);if(re)return re.role_id;const R=_.find(Y=>Y.person_id===j&&Y.segment===v);return R?R.role_id:null},H=s("SELECT person_id, role_id FROM assignment WHERE date=? AND segment=?",[u,v]),ie=new Map;for(const j of H){const W=U(j.person_id);W!==null&&W!==j.role_id&&ie.set(`${j.person_id}:${j.role_id}`,!0)}return ie},[s,a,v,g,$,ft]),Tn=N.useMemo(()=>{const u=ut(a);if(u==="Weekend")return[];const p=`avail_${u.toLowerCase().slice(0,3)}`,_=s(`SELECT id, first_name, last_name, ${p} as avail FROM person WHERE active = 1 ORDER BY last_name, first_name`),M=g(a),P=new Set(s("SELECT DISTINCT person_id FROM assignment WHERE date=? AND segment=?",[M,v]).map(R=>R.person_id)),z=s("SELECT person_id, avail FROM availability_override WHERE date=?",[M]),I=new Map(z.map(R=>[R.person_id,R.avail])),U=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0,0),H=new Date(U.getFullYear(),U.getMonth(),U.getDate()+1,0,0,0,0),ie=s("SELECT person_id FROM timeoff WHERE NOT (? >= end_ts OR ? <= start_ts)",[U.toISOString(),H.toISOString()]),j=new Set(ie.map(R=>R.person_id)),W=a.getDay(),re=W>=1&&W<=5?W-1:-1;if(re>=0){const R=s("SELECT person_id FROM recurring_timeoff WHERE weekday=? AND active=1",[re]);for(const Y of R)j.add(Y.person_id)}return _.filter(R=>{if(P.has(R.id))return!1;const Y=I.get(R.id)||R.avail||"U";return Y==="U"?!1:v==="AM"||v==="Early"?Y==="AM"||Y==="B":v==="PM"?Y==="PM"||Y==="B":Y!=="U"}).map(R=>({...R,hasTimeOff:j.has(R.id)}))},[s,a,v,g,ut]),Rt=N.useMemo(()=>new Map(n.map(u=>[u.id,u])),[n]),Nr=N.useMemo(()=>{const u=[];for(const p of We){const _=kt.get(p.id)||0,P=w(a,p.group_id,p.id,v)-_;for(let z=0;z<P;z++)u.push({role:p,group:Rt.get(p.group_id)})}return u},[We,kt,w,a,v,Rt]);function oi(){if(!Nr.length){le.showAlert("No unmet needs for this segment. All roles are filled.","No Unmet Needs");return}const u=Yi(),p=new Map(kt),_=new Map,M=new Map;for(const D of We)M.set(D.id,D),_.set(D.id,w(a,D.group_id,D.id,v));const P=s(`SELECT a.person_id, a.role_id, r.group_id, p.last_name, p.first_name
       FROM assignment a
       JOIN role r ON r.id=a.role_id
       JOIN person p ON p.id=a.person_id
       WHERE a.date=? AND a.segment=?`,[g(a),v]),z=new Map;for(const D of P)z.set(D.person_id,{role_id:D.role_id,group_id:D.group_id,label:`${D.last_name}, ${D.first_name}`});const I=new Map;for(const D of We){let Q=A(a,v,D).filter(Z=>!z.has(Z.id));Q.sort((Z,Oe)=>u==="alphabetical"?Z.label.localeCompare(Oe.label):Z.trained!==Oe.trained?Z.trained?-1:1:Z.label.localeCompare(Oe.label)),I.set(D.id,Q)}const U=`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}`,H=a.getDay()===0?7:a.getDay(),ie=s("SELECT person_id, role_id FROM monthly_default_day WHERE month=? AND weekday=? AND segment=?",[U,H,v]),j=s("SELECT person_id, role_id FROM monthly_default WHERE month=? AND segment=?",[U,v]),W=new Map;for(const D of ie){let Q=W.get(D.role_id);Q||(Q=[],W.set(D.role_id,Q)),Q.push(D.person_id)}const re=new Map;for(const D of j){let Q=re.get(D.role_id);Q||(Q=[],re.set(D.role_id,Q)),Q.push(D.person_id)}const R=new Map;function Y(D){let Q=R.get(D.id);return Q||(Q=new Set([...s("SELECT person_id FROM training WHERE role_id=? AND status='Qualified'",[D.id]).map(Z=>Z.person_id),...s(`SELECT DISTINCT person_id FROM monthly_default WHERE role_id=? AND segment=?
             UNION
             SELECT DISTINCT person_id FROM monthly_default_day WHERE role_id=? AND segment=?`,[D.id,v,D.id,v]).map(Z=>Z.person_id)]),R.set(D.id,Q)),Q}const oe=new Set,be=Nr.slice(),we=[];function Re(D,Q,Z,Oe,st,Se){const Pe=Y(D);for(const[ue,xe]of z.entries()){if(oe.has(ue))continue;const Ce=M.get(xe.role_id);if(Z==="same"&&Ce.group_id!==Q||Z==="other"&&Ce.group_id===Q||xe.role_id===D.id)continue;if(st){const O=_.get(Ce.id)||0;if((p.get(Ce.id)||0)<=O)continue}if(Se){const O=I.get(Ce.id)?.filter(T=>T.trained&&!z.has(T.id)&&!oe.has(T.id));if(!O||O.length===0)continue}const S=Pe.has(ue);if(!(Oe==="trained"&&!S)&&!(Oe==="untrained"&&S))return{person_id:ue,role_id:xe.role_id,label:xe.label,group_id:Ce.group_id}}return null}for(;be.length;){const{role:D,group:Q}=be.shift();let Z=null,Oe=[];const st=[...W.get(D.id)||[],...re.get(D.id)||[]];for(const Se of st){if(Z!=null)break;if(oe.has(Se)||z.has(Se))continue;const Pe=(I.get(D.id)||[]).find(ue=>ue.id===Se&&!oe.has(ue.id));Pe&&(Z=Se,Oe=[{id:Se,label:Pe.label}],oe.add(Se),z.set(Se,{role_id:D.id,group_id:Q.id,label:Pe.label}),p.set(D.id,(p.get(D.id)||0)+1))}if(Z==null&&/Coordinator|Supervisor/i.test(D.name)){const Se=Y(D);let Pe=null,ue=null;for(const[Ce,S]of z.entries()){if(oe.has(Ce)||S.group_id!==Q.id)continue;const O=M.get(S.role_id);if(!/Assistant/i.test(O.name))continue;const T={person_id:Ce,role_id:S.role_id,label:S.label};Se.has(Ce)?Pe||(Pe=T):ue||(ue=T)}const xe=Pe||ue;if(xe){Z=xe.person_id,Oe=[{id:xe.person_id,label:xe.label}],oe.add(Z);const Ce=(p.get(xe.role_id)||0)-1;p.set(xe.role_id,Ce);const S=_.get(xe.role_id)||0;if(Ce<S){const O=M.get(xe.role_id),T=Rt.get(O.group_id);be.push({role:O,group:T})}z.set(Z,{role_id:D.id,group_id:Q.id,label:xe.label}),p.set(D.id,(p.get(D.id)||0)+1)}}if(Z==null){const Se=(I.get(D.id)||[]).filter(ue=>!oe.has(ue.id));Oe=Se;const Pe=Se.filter(ue=>ue.trained);if(Pe.length>0)Z=Pe[0].id,oe.add(Z),z.set(Z,{role_id:D.id,group_id:Q.id,label:Pe[0].label}),p.set(D.id,(p.get(D.id)||0)+1);else{let ue=Re(D,Q.id,"same","trained",!0,!1)||Re(D,Q.id,"other","trained",!0,!1)||Re(D,Q.id,"same","trained",!1,!0)||Re(D,Q.id,"other","trained",!1,!0)||Re(D,Q.id,"same","untrained",!0,!1)||Re(D,Q.id,"other","untrained",!0,!1);if(ue){Z=ue.person_id,Oe=[{id:ue.person_id,label:ue.label}],oe.add(Z);const xe=(p.get(ue.role_id)||0)-1;p.set(ue.role_id,xe);const Ce=_.get(ue.role_id)||0;if(xe<Ce){const S=M.get(ue.role_id),O=Rt.get(S.group_id);be.push({role:S,group:O})}z.set(Z,{role_id:D.id,group_id:Q.id,label:ue.label}),p.set(D.id,(p.get(D.id)||0)+1)}}}we.push({role:D,group:Q,candidates:Oe.map(Se=>({id:Se.id,label:Se.label})),selected:Z})}pe(we),ee(!0)}function ii(){for(const u of te)u.selected!=null&&C(l,u.selected,u.role.id,v);ee(!1)}function kr(){ee(!1)}async function si(){if(!i){le.showAlert("No database connection available.","Database Error");return}try{let u="first_monday";try{const R=s("SELECT value FROM meta WHERE key='week_start_mode'");if(R.length>0&&R[0].value){const Y=R[0].value;(Y==="first_monday"||Y==="first_day")&&(u=Y)}}catch(R){console.error("Failed to load week_start_mode:",R)}const p=Vn(a,u),{defaults:_,overrides:M,weekOverrides:P}=$(p);if(_.length===0&&M.length===0&&P.length===0){le.showAlert(`No monthly defaults found for ${p}. Please set up monthly defaults first.`,"No Defaults Found");return}const z=new Map;for(const R of _)z.set(`${R.person_id}|${R.segment}`,R.role_id);const I=new Map;for(const R of M)I.set(`${R.person_id}|${R.weekday}|${R.segment}`,R.role_id);const U=new Map;for(const R of P)U.set(`${R.person_id}|${R.week_number}|${R.segment}`,R.role_id);const H=Kn(a,u),ie=a.getDay();if(ut(a)==="Weekend"){le.showAlert("Cannot copy defaults for weekend dates.","Invalid Date");return}const W=[];for(const R of he)for(const Y of r){const oe=Y.name;let be=H>0?U.get(`${R.id}|${H}|${oe}`):void 0;if(be===void 0&&(be=I.get(`${R.id}|${ie}|${oe}`)),be===void 0&&(be=z.get(`${R.id}|${oe}`)),be==null)continue;const we=ze(i,R.id,a);let Re=!1;if(oe==="AM"||oe==="Early"?Re=we==="AM"||we==="B":oe==="PM"?Re=we==="PM"||we==="B":Re=we==="AM"||we==="PM"||we==="B",!Re||He(R.id,a,oe))continue;const D=g(a);s("SELECT role_id FROM assignment WHERE date=? AND person_id=? AND segment=?",[D,R.id,oe]).length>0||W.push({personId:R.id,roleId:be,segment:oe,personName:`${R.last_name}, ${R.first_name}`})}if(W.length===0){le.showAlert("No new assignments to create. All defaults are either already assigned or blocked by availability/time-off.","No Changes Needed");return}if(!await le.showConfirm(`Apply ${W.length} assignment(s) from monthly defaults for ${p} to ${m(a)}?`,"Confirm Copy Defaults"))return;for(const R of W){const Y=g(a);xt("INSERT OR REPLACE INTO assignment (date, person_id, role_id, segment) VALUES (?,?,?,?)",[Y,R.personId,R.roleId,R.segment])}ot(),dt(`Applied ${W.length} assignment(s) from monthly defaults.`)}catch(u){le.showAlert(`Failed to copy defaults: ${u instanceof Error?u.message:"Unknown error"}`,"Copy Defaults Error")}}async function ai(){try{await Ii(g(a))}catch(u){le.showAlert(`Failed to export schedule: ${u instanceof Error?u.message:"Unknown error"}`,"Export Error")}}function li(){const u=g(a),p=s(`SELECT a.id, a.segment, a.role_id, a.person_id, p.first_name, p.last_name, r.name as role_name, g.name as group_name
       FROM assignment a
       JOIN person p ON p.id = a.person_id
       JOIN role r ON r.id = a.role_id
       JOIN grp g ON g.id = r.group_id
       WHERE a.date = ? AND a.segment = ?
       ORDER BY g.name, r.name, p.last_name, p.first_name`,[u,v]);if(p.length===0){le.showAlert("No assignments found for this segment.","No Data");return}const _=new Date(u+"T00:00:00"),M=_.toLocaleDateString("en-US",{weekday:"long"}),P=_.toLocaleDateString("en-US",{month:"long"}),z=_.getDate(),I=new Map;for(const H of p){let ie=I.get(H.group_name);ie||(ie=new Map,I.set(H.group_name,ie));let j=ie.get(H.role_name);j||(j=[],ie.set(H.role_name,j));const re=zn(H.person_id)[v]?.start||et[v]?.start,R=re?$t(`${re.getHours().toString().padStart(2,"0")}:${re.getMinutes().toString().padStart(2,"0")}`):"";j.push({name:`@${H.first_name} ${H.last_name}`,startTime:R})}let U=` **${M}, ${P} ${z}**  ${v}

`;for(const[H,ie]of I){U+=`**${H}**
`;const j=Array.from(ie.entries()).sort((W,re)=>W[0].localeCompare(re[0]));for(const[W,re]of j){const R=W===H?"":W.startsWith(H+" ")?W.slice(H.length+1):W,Y=R?`${R}: `:"",oe=re.map(be=>`${be.name} (${be.startTime})`).join(", ");U+=` ${Y}${oe}
`}U+=`
`}U+=`_Total: ${p.length} assignments_`,Ut(U),fe(!0)}async function ci(){try{await navigator.clipboard.writeText(Ie),le.showAlert("Copied to clipboard!","Success")}catch{le.showAlert("Failed to copy. Please select and copy manually.","Error")}}const et=N.useMemo(()=>{const u=new Date(a.getFullYear(),a.getMonth(),a.getDate()),p=M=>{const[P,z]=M.split(":").map(Number);return new Date(u.getFullYear(),u.getMonth(),u.getDate(),P,z,0,0)},_={};for(const M of r)_[M.name]={start:p(M.start_time),end:p(M.end_time)};return _},[r,a]),jr=N.useMemo(()=>{const u=s("SELECT person_id, segment, role_id FROM assignment WHERE date=?",[g(a)]),p=new Map;for(const _ of u){let M=p.get(_.person_id);M||(M=new Map,p.set(_.person_id,M));let P=M.get(_.segment);P||(P=new Set,M.set(_.segment,P)),P.add(_.role_id)}return p},[s,g,a]),zn=N.useCallback(u=>{const p={};for(const[z,I]of Object.entries(et))p[z]={start:new Date(I.start),end:new Date(I.end)};const _=jr.get(u);if(!_)return p;const M=z=>{try{const I=Fr(i,z.id);if(I.length===0){const H=_.get(z.condition_segment);return!(!H||z.condition_role_id!=null&&!H.has(z.condition_role_id))}return(z.logic_operator||"AND")==="AND"?I.every(H=>{const ie=_.get(H.condition_segment);return!(!ie||H.condition_role_id!=null&&!ie.has(H.condition_role_id))}):I.some(H=>{const ie=_.get(H.condition_segment);return!(!ie||H.condition_role_id!=null&&!ie.has(H.condition_role_id))})}catch{const U=_.get(z.condition_segment);return!(!U||z.condition_role_id!=null&&!U.has(z.condition_role_id))}},P=(z,I)=>new Date(z.getTime()+I*6e4);for(const z of x){if(!M(z))continue;const I=p[z.target_segment];if(!I)continue;const U=p[z.condition_segment];let H;switch(z.baseline){case"condition.start":H=U?.start;break;case"condition.end":H=U?.end;break;case"target.start":H=I.start;break;case"target.end":H=I.end;break}H&&(I[z.target_field]=P(H,z.offset_minutes))}return p},[et,jr,x,i]);N.useMemo(()=>{const u=et[v]?.start,p=et[v]?.end;return!u||!p||v==="Early"?0:Math.max(0,Math.round((p.getTime()-u.getTime())/6e4))},[et,v]);const Ot=N.useMemo(()=>{const u=new Map,p=et[v]?.start,_=et[v]?.end;if(!p||!_||v==="Early"){for(const j of We)u.set(j.id,kt.get(j.id)||0);return u}const M=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0,0),P=new Date(M.getFullYear(),M.getMonth(),M.getDate()+1,0,0,0,0),z=s("SELECT person_id, start_ts, end_ts FROM timeoff WHERE NOT (? >= end_ts OR ? <= start_ts)",[M.toISOString(),P.toISOString()]),I=a.getDay(),U=I>=1&&I<=5?I-1:-1,H=new Map;for(const j of z){const W=H.get(j.person_id)||[];W.push({start:new Date(j.start_ts),end:new Date(j.end_ts)}),H.set(j.person_id,W)}if(U>=0){const j=s("SELECT person_id, start_time, end_time FROM recurring_timeoff WHERE weekday=? AND active=1",[U]);for(const W of j){const[re,R]=W.start_time.split(":").map(Number),[Y,oe]=W.end_time.split(":").map(Number),be=H.get(W.person_id)||[];be.push({start:new Date(a.getFullYear(),a.getMonth(),a.getDate(),re,R,0,0),end:new Date(a.getFullYear(),a.getMonth(),a.getDate(),Y,oe,0,0)}),H.set(W.person_id,be)}}const ie=s("SELECT person_id, role_id FROM assignment WHERE date=? AND segment=?",[g(a),v]);for(const j of We)u.set(j.id,0);for(const j of ie){const W=zn(j.person_id),re=W[v]?.start||p,R=W[v]?.end||_,Y=re.getTime(),oe=R.getTime(),be=oe-Y,we=Math.ceil(be*(rt/100)),Re=H.get(j.person_id)||[];let D=0;for(const Z of Re){const Oe=Z.start.getTime(),st=Z.end.getTime();D+=Math.max(0,Math.min(st,oe)-Math.max(Oe,Y))}D>=we||u.set(j.role_id,(u.get(j.role_id)||0)+1)}return u},[s,We,v,et,a,g,kt,zn,rt]),Hr=Jn.memo(function({group:p,isDraggable:_}){const M=We.filter(j=>j.group_id===p.id);let P=0,z=0;for(const j of M){const W=Ot.get(j.id)||0,re=w(a,p.id,j.id,v);P+=W,z+=re}const I=M.every(j=>{const W=Ot.get(j.id)||0,re=w(a,p.id,j.id,v);return W>=re}),U=I?h.colorPaletteGreenBackground2:h.colorPaletteRedBackground2,{bg:H,fg:ie}=uo(p.theme);return d.jsxs(Ir,{className:Ee.groupCard,style:{borderTopWidth:"3px",borderTopStyle:"solid",borderTopColor:U,backgroundColor:H,color:ie},children:[d.jsx(Pi,{className:_?"drag-handle":"",header:d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:h.spacingHorizontalS,width:"100%",justifyContent:"space-between"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:h.spacingHorizontalS},children:[_&&d.jsx("div",{style:{cursor:"grab",color:h.colorNeutralForeground3,display:"flex",alignItems:"center"},"aria-label":"Drag to reposition group",children:d.jsx(Ci,{})}),d.jsx(Mi,{children:p.name})]}),d.jsxs(jt,{appearance:"tint",color:I?"success":"danger",style:{marginLeft:"auto",flexShrink:0},children:[P,"/",z]})]})}),d.jsx("div",{className:Ee.rolesGrid,style:{gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))","--scrollbar-thumb":h.colorNeutralStroke1},children:M.map(j=>d.jsx(ui,{group:p,role:j},j.id))})]})}),ui=Jn.memo(function({group:p,role:_}){const M=N.useMemo(()=>s("SELECT a.id, p.first_name, p.last_name, p.id as person_id FROM assignment a JOIN person p ON p.id=a.person_id WHERE a.date=? AND a.role_id=? AND a.segment=? ORDER BY p.last_name,p.first_name",[g(a),_.id,v]),[s,a,_.id,v,g]),P=N.useMemo(()=>{const S=s("SELECT person_id FROM training WHERE role_id=? AND status='Qualified'",[_.id]).map(T=>T.person_id),O=s(`SELECT DISTINCT person_id FROM monthly_default WHERE role_id=? AND segment=?
         UNION
         SELECT DISTINCT person_id FROM monthly_default_day WHERE role_id=? AND segment=?`,[_.id,v,_.id,v]).map(T=>T.person_id);return new Set([...S,...O])},[s,_.id,v]),z=N.useMemo(()=>A(a,v,_),[A,a,v,_]),I=N.useMemo(()=>{const S=T=>T.replace(/\s*\(Untrained\)$/i,""),O=[...z];return O.sort((T,L)=>{const K=P.has(T.id)?1:0,ne=P.has(L.id)?1:0;return K!==ne?ne-K:S(T.label).localeCompare(S(L.label))}),O},[z,P]),U=N.useMemo(()=>{const S=new Date(a.getFullYear(),a.getMonth(),a.getDate()),O=L=>{const[K,ne]=L.split(":").map(Number);return new Date(S.getFullYear(),S.getMonth(),S.getDate(),K,ne,0,0)},T={};for(const L of r)T[L.name]={start:O(L.start_time),end:O(L.end_time)};return T},[r,a]),H=N.useMemo(()=>{const S=s("SELECT person_id, segment, role_id FROM assignment WHERE date=?",[g(a)]),O=new Map;for(const T of S){let L=O.get(T.person_id);L||(L=new Map,O.set(T.person_id,L));let K=L.get(T.segment);K||(K=new Set,L.set(T.segment,K)),K.add(T.role_id)}return O},[s,g,a]),ie=N.useCallback(S=>{const O={};for(const[ne,ge]of Object.entries(U))O[ne]={start:new Date(ge.start),end:new Date(ge.end)};const T=H.get(S);if(!T)return O;const L=ne=>{try{const ge=Fr(i,ne.id);if(ge.length===0){const me=T.get(ne.condition_segment);return!(!me||ne.condition_role_id!=null&&!me.has(ne.condition_role_id))}return(ne.logic_operator||"AND")==="AND"?ge.every(me=>{const Me=T.get(me.condition_segment);return!(!Me||me.condition_role_id!=null&&!Me.has(me.condition_role_id))}):ge.some(me=>{const Me=T.get(me.condition_segment);return!(!Me||me.condition_role_id!=null&&!Me.has(me.condition_role_id))})}catch{const Ue=T.get(ne.condition_segment);return!(!Ue||ne.condition_role_id!=null&&!Ue.has(ne.condition_role_id))}},K=(ne,ge)=>new Date(ne.getTime()+ge*6e4);for(const ne of x){if(!L(ne))continue;const ge=O[ne.target_segment];if(!ge)continue;const Ue=O[ne.condition_segment];let me;switch(ne.baseline){case"condition.start":me=Ue?.start;break;case"condition.end":me=Ue?.end;break;case"target.start":me=ge.start;break;case"target.end":me=ge.end;break}me&&(ge[ne.target_field]=K(me,ne.offset_minutes))}return O},[U,H,x,i]),j=U,W=N.useMemo(()=>{if(v==="Early")return new Map;const S=new Map,O=U[v]?.start,T=U[v]?.end;if(!O||!T)return S;const L=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0,0),K=new Date(L.getFullYear(),L.getMonth(),L.getDate()+1,0,0,0,0),ne=s("SELECT person_id, start_ts, end_ts FROM timeoff WHERE NOT (? >= end_ts OR ? <= start_ts)",[L.toISOString(),K.toISOString()]),ge=a.getDay(),Ue=ge>=1&&ge<=5?ge-1:-1,me=[];for(const Me of ne)me.push({person_id:Me.person_id,start:new Date(Me.start_ts),end:new Date(Me.end_ts)});if(Ue>=0){const Me=s("SELECT person_id, start_time, end_time FROM recurring_timeoff WHERE weekday=? AND active=1",[Ue]);for(const tt of Me){const[ht,Nn]=tt.start_time.split(":").map(Number),[kn,Xt]=tt.end_time.split(":").map(Number);me.push({person_id:tt.person_id,start:new Date(a.getFullYear(),a.getMonth(),a.getDate(),ht,Nn,0,0),end:new Date(a.getFullYear(),a.getMonth(),a.getDate(),kn,Xt,0,0)})}}for(const Me of me){const tt=Me.person_id,ht=ie(tt),Nn=ht[v]?.start||O,kn=ht[v]?.end||T,Xt=Nn.getTime(),$r=kn.getTime(),Wr=Math.max(0,Math.round(($r-Xt)/6e4)),fi=Me.start.getTime(),pi=Me.end.getTime(),Ar=Math.max(0,Math.min(pi,$r)-Math.max(fi,Xt));if(Ar<=0)continue;const jn=(S.get(tt)?.minutes||0)+Math.round(Ar/6e4),Br=Wr>0&&jn>=Math.ceil(Wr/2),hi=jn>0&&!Br;S.set(tt,{minutes:jn,heavy:Br,partial:hi})}return S},[s,v,U,a,ie]),re=N.useMemo(()=>{if(v==="Early")return 0;const S=j[v]?.start,O=j[v]?.end;return!S||!O?0:Math.max(0,Math.round((O.getTime()-S.getTime())/6e4))},[v,j]),R=N.useMemo(()=>{const S=new Map;for(const O of We){const T=Ot.get(O.id)||0,L=w(a,O.group_id,O.id,v),K=T<L?"under":T===L?"exact":"over";S.set(O.id,K)}return S},[We,Ot,w,a,v]),Y=N.useMemo(()=>{const S=s("SELECT person_id, role_id FROM assignment WHERE date=? AND segment=?",[g(a),v]),O=new Map;for(const T of S)O.has(T.person_id)||O.set(T.person_id,T.role_id);return O},[s,a,v,g]),oe=w(a,p.id,_.id,v),be=M.reduce((S,O)=>S+(W.get(O.person_id)?.heavy?1:0),0),we=M.length-be,Re=we<oe?"under":we===oe?"exact":"over",D=Re==="under"?h.colorPaletteRedBackground2:Re==="exact"?h.colorPaletteGreenBackground2:h.colorPaletteYellowBackground2,Q=N.useCallback(S=>{const O=L=>s("SELECT person_id FROM training WHERE role_id=? AND status='Qualified' AND person_id=?",[L,S.person_id]).length>0?!0:s(`SELECT DISTINCT person_id FROM monthly_default WHERE role_id=? AND person_id=?
             UNION
             SELECT DISTINCT person_id FROM monthly_default_day WHERE role_id=? AND person_id=?`,[L,S.person_id,L,S.person_id]).length>0,T=[];for(const L of We){if(!A(a,v,L).some(ht=>ht.id===S.person_id&&!ht.blocked))continue;const ge=Rt.get(L.group_id),Ue=w(a,L.group_id,L.id,v),me=Ot.get(L.id)||0,Me=Math.max(0,Ue-me),tt=O(L.id);T.push({role:L,group:ge,need:Me,trained:tt})}if(!T.length){le.showAlert("No eligible destinations found for this person. They may not be qualified or available for any open roles.","No Eligible Destinations");return}T.sort((L,K)=>{if(L.need===0&&K.need>0)return 1;if(L.need>0&&K.need===0)return-1;if(K.need!==L.need)return K.need-L.need;const ne=String(L.group?.name||""),ge=String(K.group?.name||"");return ne!==ge?ne.localeCompare(ge):String(L.role.name).localeCompare(String(K.role.name))}),Nt({assignment:S,targets:T}),B(null)},[We,Rt,A,a,v,w,Ot,s]),[Z,Oe]=N.useState([]),[st,Se]=N.useState(!1),Pe=N.useCallback(S=>{const O=W.get(S.id),T=[];O?.heavy?T.push("(Time-off)"):O?.partial&&T.push("(Partial Time-off)");const L=Y.get(S.id),K=L!=null?R.get(L):void 0;K==="under"||K==="exact"?T.push("(Assigned)"):K==="over"&&T.push("(Overstaffed)");const ne=T.length?` ${T.join(" ")}`:"";return`${S.label}${ne}`},[W,Y,R]),ue=N.useMemo(()=>{if(Z.length===0)return"";const S=I.find(O=>String(O.id)===Z[0]);return S?Pe(S):""},[Z,I,Pe]),{bg:xe,fg:Ce}=uo(p.theme);return d.jsxs(Ir,{className:Ee.roleCard,style:{borderLeftColor:D,"--scrollbar-thumb":h.colorNeutralStroke1,backgroundColor:xe,color:Ce},children:[d.jsxs("div",{className:Ee.roleHeader,children:[d.jsx("span",{className:Ee.roleName,children:_.name}),d.jsxs("span",{className:Ee.roleCount,children:[we,"/",oe]})]}),d.jsx("div",{style:{display:"flex",alignItems:"center",gap:h.spacingHorizontalS,marginBottom:h.spacingVerticalS},children:d.jsx(Hn,{placeholder:G?"+ Add person":"Add person",disabled:!G,open:st,onOpenChange:(S,O)=>Se(!!O.open),selectedOptions:Z,value:ue,onOptionSelect:async(S,O)=>{const T=O.optionValue??"";if(!T)return;const L=Number(T),K=b(L,a,v);if(K.hasOverlap&&K.overlapPercent>0&&!await le.showConfirm(`This person has ${K.overlapPercent}% time-off overlap during this segment. Schedule anyway?`,"Partial Time Off")){Oe([]);return}C(l,L,_.id,v),Oe([])},style:{width:"100%",minHeight:"32px"},appearance:"outline",children:st&&I.map(S=>{const O=W.get(S.id),T=!!O?.heavy,L=!!O?.partial,K=Pe(S);return d.jsx(Vt,{value:String(S.id),text:K,style:T?{fontStyle:"italic",color:h.colorPaletteDarkOrangeForeground1}:L?{fontStyle:"italic",color:h.colorPaletteYellowForeground1}:void 0,children:K},S.id)})})}),d.jsx("ul",{className:Ee.assignmentsList,children:M.map(S=>d.jsxs("li",{className:Ee.assignmentItem,children:[d.jsxs(Ln,{className:Ee.assignmentName,children:[d.jsxs(Di,{personId:S.person_id,children:[S.last_name,", ",S.first_name,!P.has(S.person_id)&&" (Untrained)"]}),ri.has(`${S.person_id}:${_.id}`)&&d.jsx(Kt,{content:"This person was moved to this role",relationship:"label",children:d.jsx("span",{className:Ee.movedBadge,children:"Moved"})}),(()=>{const O=W.get(S.person_id);if(!O)return null;const T=O.minutes,L=re>0?Math.round(T/re*100):void 0,K=L!=null?`Overlap: ${T} min (${L}%)`:`Overlap: ${T} min`;return O.heavy?d.jsx(Kt,{content:K,relationship:"label",children:d.jsx(jt,{appearance:"tint",color:"danger",style:{marginLeft:8},children:"Time Off"})}):O.partial?d.jsx(Kt,{content:K,relationship:"label",children:d.jsx(jt,{appearance:"tint",color:"warning",style:{marginLeft:8},children:"Partial Time Off"})}):null})()]}),G&&d.jsxs("div",{className:Ee.actionsRow,children:[d.jsx(ke,{size:"small",appearance:"secondary",onClick:()=>Q(S),children:"Move"}),d.jsx(ke,{size:"small",appearance:"secondary",onClick:async()=>{try{await le.showConfirm(`Remove ${S.last_name}, ${S.first_name} from ${_.name}?`,"Confirm Removal")&&k(S.id)}catch(O){console.error("Error during removal confirmation:",O)}},children:"Remove"})]})]},S.id))})]})});function di(){if(!Be||E==null)return;const u=Be.targets.find(I=>I.role.id===E);if(!u)return;const p=Be.assignment.id,_=Be.assignment.person_id,M=u.role.id,P=g(a),z=v;Nt(null),B(null),xt("DELETE FROM assignment WHERE id=?",[p]),xt("INSERT INTO assignment (date, person_id, role_id, segment) VALUES (?,?,?,?)",[P,_,M,z]),ot()}function Lr(){Nt(null),B(null)}return d.jsxs("div",{className:Ee.root,children:[d.jsxs("div",{className:Ee.header,children:[d.jsxs("div",{className:Ee.headerLeft,children:[d.jsx("label",{htmlFor:"run-date-picker",style:{display:"inline-block"},children:d.jsx(Ln,{children:d.jsx("b",{children:"Date"})})}),d.jsx(Ti,{id:"run-date-picker",type:"date",value:g(a),onChange:(u,p)=>{const _=p.value;_&&f(m(y(_)))}})]}),d.jsx("div",{className:Ee.headerCenter,children:d.jsx(zi,{selectedValue:t,onTabSelect:(u,p)=>e(p.value),children:r.map(u=>d.jsx(Ni,{value:u.name,children:u.name},u.name))})}),d.jsxs("div",{className:Ee.headerRight,children:[d.jsx(ke,{appearance:"secondary",onClick:()=>Ne(!0),children:"View Moves"}),d.jsx(ke,{appearance:"secondary",onClick:li,children:"Send to Teams"}),d.jsx(ke,{appearance:"secondary",onClick:ai,children:"Export"}),d.jsx(ke,{appearance:"secondary",onClick:oi,children:"Auto Fill"}),d.jsx(ke,{appearance:"secondary",onClick:si,children:"Copy Defaults"}),d.jsx(ke,{appearance:"secondary",onClick:()=>q(!0),children:"Edit Needs for This Day"})]})]}),pt.length>0&&d.jsx("div",{style:{marginBottom:h.spacingVerticalM},children:pt.map(u=>{const p=zr.filter(P=>!P.blocked&&P.is_split&&P.original_start!==P.adjusted_start||P.original_end!==P.adjusted_end),_=zr.filter(P=>P.blocked),M=ni.get(u.title)||[];return d.jsx(ki,{intent:"warning",style:{marginBottom:h.spacingVerticalS},children:d.jsxs(ji,{children:[d.jsxs(fo,{children:[d.jsx(Hi,{style:{marginRight:h.spacingHorizontalXS,verticalAlign:"middle"}}),u.title]}),d.jsxs("div",{children:[$t(u.start_time),"  ",$t(u.end_time),u.description&&d.jsxs("span",{children:["  ",u.description]})]}),(p.length>0||_.length>0)&&d.jsxs("div",{style:{marginTop:h.spacingVerticalXS,fontSize:h.fontSizeBase200},children:[_.length>0&&d.jsxs("span",{style:{color:h.colorPaletteRedForeground1},children:["Blocked segments: ",_.map(P=>P.name).join(", ")]}),p.length>0&&d.jsxs("span",{children:[_.length>0?"  ":"","Adjusted segments: ",p.map(P=>`${P.name} (${$t(P.adjusted_start)}${$t(P.adjusted_end)})`).join(", ")]})]}),M.length>0&&d.jsxs("div",{style:{marginTop:h.spacingVerticalS},children:[d.jsxs(un,{size:200,weight:"semibold",children:["Attendees (",M.length,"):"]}),d.jsx("div",{style:{marginTop:h.spacingVerticalXS,display:"flex",flexWrap:"wrap",gap:h.spacingHorizontalXS},children:M.map(P=>d.jsxs(jt,{appearance:"outline",color:"informative",size:"small",children:[P.first_name," ",P.last_name]},P.id))})]})]})},u.id)})}),Tn.length>0&&d.jsxs("div",{style:{marginBottom:h.spacingVerticalM,padding:h.spacingHorizontalS,backgroundColor:h.colorNeutralBackground3,borderRadius:h.borderRadiusMedium,border:`1px solid ${h.colorNeutralStroke2}`},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer"},onClick:()=>Ge(!de),children:[d.jsxs(un,{weight:"semibold",size:200,children:[" ",Tn.length," available but unassigned"]}),d.jsx(ke,{size:"small",appearance:"subtle",children:de?"Hide":"Show"})]}),de&&d.jsx("div",{style:{marginTop:h.spacingVerticalS,display:"flex",flexWrap:"wrap",gap:h.spacingHorizontalXS},children:Tn.map(u=>d.jsx(Kt,{content:u.hasTimeOff?"Has time off during this day":"Available",relationship:"label",children:d.jsxs(jt,{appearance:u.hasTimeOff?"tint":"outline",color:u.hasTimeOff?"warning":"brand",size:"small",children:[u.hasTimeOff&&" ",u.first_name," ",u.last_name]})},u.id))})]}),Ze?d.jsx("div",{style:{display:"flex",flexDirection:"column",gap:h.spacingHorizontalL},children:n.map(u=>d.jsx(Hr,{group:u,isDraggable:!1},u.id))}):d.jsx(Wl,{className:"layout",layout:Mn,cols:12,rowHeight:110,onLayoutChange:ti,draggableHandle:".drag-handle",children:n.map(u=>d.jsx("div",{children:d.jsx(Hr,{group:u,isDraggable:!0})},String(u.id)))}),Be&&d.jsxs(Jt,{open:!0,onOpenChange:(u,p)=>{p.open||Lr()},children:[d.jsx(Li,{children:d.jsx("span",{})}),d.jsx(Qt,{children:d.jsxs(Zt,{children:[d.jsxs(en,{children:["Move ",Be.assignment.last_name,", ",Be.assignment.first_name]}),d.jsx(tn,{children:d.jsx(Hn,{placeholder:"Select destination",selectedOptions:E!=null?[String(E)]:[],value:Ye,onOptionSelect:(u,p)=>{const _=p.optionValue??p.optionText;B(_?Number(_):null)},style:{width:"100%"},children:Be.targets.map(u=>{const p=u.need>0?` (need ${u.need})`:"",_=u.trained?"":" (Untrained)",M=`${u.group.name} - ${u.role.name}${p}${_}`;return d.jsx(Vt,{value:String(u.role.id),text:M,children:M},u.role.id)})})}),d.jsxs(nn,{children:[d.jsx(ke,{onClick:Lr,children:"Cancel"}),d.jsx(ke,{appearance:"primary",disabled:E==null,onClick:di,children:"Move"})]})]})})]}),ae&&d.jsx(Jt,{open:!0,onOpenChange:(u,p)=>{p.open||kr()},children:d.jsx(Qt,{children:d.jsxs(Zt,{children:[d.jsx(en,{children:"Auto-Fill Suggestions"}),d.jsxs(tn,{children:[te.length===0&&d.jsx(Ln,{children:"No suggestions available."}),te.map((u,p)=>{const _=u.selected!=null?u.candidates.find(M=>M.id===u.selected)?.label??"":"None";return d.jsxs("div",{style:{marginBottom:h.spacingVerticalS},children:[d.jsx($i,{children:`${u.group.name} - ${u.role.name}`}),d.jsxs(Hn,{selectedOptions:u.selected!=null?[String(u.selected)]:[""],value:_,onOptionSelect:(M,P)=>{const z=P.optionValue?Number(P.optionValue):null;pe(I=>I.map((U,H)=>H===p?{...U,selected:z}:U))},style:{width:"100%"},children:[d.jsx(Vt,{value:"",text:"None",children:"None"}),u.candidates.map(M=>d.jsx(Vt,{value:String(M.id),text:M.label,children:M.label},M.id))]})]},u.role.id)})]}),d.jsxs(nn,{children:[d.jsx(ke,{onClick:kr,children:"Cancel"}),d.jsx(ke,{appearance:"primary",onClick:ii,children:"Confirm"})]})]})})}),le.alertState&&d.jsx(Wi,{open:!0,title:le.alertState.title,message:le.alertState.message,onClose:le.closeAlert}),le.confirmState&&d.jsx(Ai,{open:!0,title:le.confirmState.options.title,message:le.confirmState.options.message,confirmText:le.confirmState.options.confirmText,cancelText:le.confirmState.options.cancelText,onConfirm:()=>le.handleConfirm(!0),onCancel:()=>le.handleConfirm(!1)}),_e&&d.jsx(Jt,{open:_e,onOpenChange:(u,p)=>{p.open||Ne(!1)},children:d.jsx(Qt,{children:d.jsxs(Zt,{children:[d.jsxs(en,{children:["Moves for ",v]}),d.jsx(tn,{children:d.jsx(Il,{date:g(a),segment:v,all:s,allRoles:ye,loadMonthlyDefaultsForMonth:$,weekStartMode:ft})}),d.jsx(nn,{children:d.jsx(ke,{onClick:()=>Ne(!1),children:"Close"})})]})})}),ce&&d.jsx(Jt,{open:ce,onOpenChange:(u,p)=>{p.open||fe(!1)},children:d.jsx(Qt,{style:{maxWidth:"700px",width:"90vw"},children:d.jsxs(Zt,{children:[d.jsx(en,{children:"Teams Message Draft"}),d.jsxs(tn,{children:[d.jsx(un,{size:200,style:{marginBottom:h.spacingVerticalS,display:"block"},children:"Copy this message and paste it into your Teams channel:"}),d.jsx(Bi,{value:Ie,readOnly:!0,style:{width:"100%",minHeight:"400px",fontFamily:"monospace",fontSize:"14px"},resize:"vertical"})]}),d.jsxs(nn,{children:[d.jsx(ke,{onClick:()=>fe(!1),children:"Close"}),d.jsx(ke,{appearance:"primary",onClick:ci,children:"Copy to Clipboard"})]})]})})})]})}export{Xl as default};
